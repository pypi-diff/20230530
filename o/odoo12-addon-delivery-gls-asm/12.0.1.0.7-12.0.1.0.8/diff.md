# Comparing `tmp/odoo12_addon_delivery_gls_asm-12.0.1.0.7-py3-none-any.whl.zip` & `tmp/odoo12_addon_delivery_gls_asm-12.0.1.0.8-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,34 +1,35 @@
-Zip file size: 53362 bytes, number of entries: 32
--rw-r--r--  2.0 unx     6898 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/README.rst
--rw-r--r--  2.0 unx       42 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/__init__.py
--rw-r--r--  2.0 unx      867 b- defN 22-Jan-06 17:28 odoo/addons/delivery_gls_asm/__manifest__.py
--rw-r--r--  2.0 unx    51160 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/api/gls_asm_api.wsdl
--rw-r--r--  2.0 unx      375 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/data/delivery_asm_data.xml
--rw-r--r--  2.0 unx    19271 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/i18n/delivery_gls_asm.pot
--rw-r--r--  2.0 unx    21770 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/i18n/es.po
--rw-r--r--  2.0 unx       89 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/models/__init__.py
--rw-r--r--  2.0 unx    11555 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/models/delivery_carrier.py
--rw-r--r--  2.0 unx    16266 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/models/gls_asm_request.py
--rw-r--r--  2.0 unx     1021 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/models/stock_picking.py
--rw-r--r--  2.0 unx      586 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx       61 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      162 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      335 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/readme/INSTALL.rst
--rw-r--r--  2.0 unx      292 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/readme/ROADMAP.rst
--rw-r--r--  2.0 unx     2828 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/readme/USAGE.rst
--rw-r--r--  2.0 unx     4444 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/static/description/icon.png
--rw-r--r--  2.0 unx     9215 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/static/description/icon.svg
--rw-r--r--  2.0 unx    18345 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/static/description/index.html
--rw-r--r--  2.0 unx       36 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/tests/__init__.py
--rw-r--r--  2.0 unx     4193 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/tests/test_delivery_gls_asm.py
--rw-r--r--  2.0 unx     2721 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/views/delivery_asm_view.xml
--rw-r--r--  2.0 unx     8378 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/views/gls_asm_manifest_template.xml
--rw-r--r--  2.0 unx      986 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/views/stock_picking_views.xml
--rw-r--r--  2.0 unx       38 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/wizard/__init__.py
--rw-r--r--  2.0 unx     1516 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/wizard/gls_asm_manifest_wizard.py
--rw-r--r--  2.0 unx      882 b- defN 22-Jan-06 17:27 odoo/addons/delivery_gls_asm/wizard/gls_asm_manifest_wizard_views.xml
--rw-r--r--  2.0 unx     7586 b- defN 22-Jan-06 17:28 odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Jan-06 17:28 odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Jan-06 17:28 odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3439 b- defN 22-Jan-06 17:28 odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/RECORD
-32 files, 195454 bytes uncompressed, 47536 bytes compressed:  75.7%
+Zip file size: 55517 bytes, number of entries: 33
+-rw-r--r--  2.0 unx     6898 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/README.rst
+-rw-r--r--  2.0 unx       42 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/__init__.py
+-rw-r--r--  2.0 unx      867 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/__manifest__.py
+-rw-r--r--  2.0 unx    51160 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/api/gls_asm_api.wsdl
+-rw-r--r--  2.0 unx      375 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/data/delivery_asm_data.xml
+-rw-r--r--  2.0 unx    19413 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/i18n/delivery_gls_asm.pot
+-rw-r--r--  2.0 unx    21770 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/i18n/es.po
+-rw-r--r--  2.0 unx       89 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/models/__init__.py
+-rw-r--r--  2.0 unx    11571 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/models/delivery_carrier.py
+-rw-r--r--  2.0 unx     8741 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/models/gls_asm_master_data.py
+-rw-r--r--  2.0 unx    12844 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/models/gls_asm_request.py
+-rw-r--r--  2.0 unx     1021 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/models/stock_picking.py
+-rw-r--r--  2.0 unx      586 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx       61 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      162 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      335 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/readme/INSTALL.rst
+-rw-r--r--  2.0 unx      292 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx     2828 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/readme/USAGE.rst
+-rw-r--r--  2.0 unx     4444 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/static/description/icon.png
+-rw-r--r--  2.0 unx     9215 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/static/description/icon.svg
+-rw-r--r--  2.0 unx    18345 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/static/description/index.html
+-rw-r--r--  2.0 unx       36 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/tests/__init__.py
+-rw-r--r--  2.0 unx     4193 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/tests/test_delivery_gls_asm.py
+-rw-r--r--  2.0 unx     2721 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/views/delivery_asm_view.xml
+-rw-r--r--  2.0 unx     8378 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/views/gls_asm_manifest_template.xml
+-rw-r--r--  2.0 unx      986 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/views/stock_picking_views.xml
+-rw-r--r--  2.0 unx       38 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/wizard/__init__.py
+-rw-r--r--  2.0 unx     1516 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/wizard/gls_asm_manifest_wizard.py
+-rw-r--r--  2.0 unx      882 b- defN 23-May-30 07:46 odoo/addons/delivery_gls_asm/wizard/gls_asm_manifest_wizard_views.xml
+-rw-r--r--  2.0 unx     7586 b- defN 23-May-30 07:46 odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-30 07:46 odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-30 07:46 odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3554 b- defN 23-May-30 07:46 odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/RECORD
+33 files, 201046 bytes uncompressed, 49499 bytes compressed:  75.4%
```

## zipnote {}

```diff
@@ -21,14 +21,17 @@
 
 Filename: odoo/addons/delivery_gls_asm/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/delivery_gls_asm/models/delivery_carrier.py
 Comment: 
 
+Filename: odoo/addons/delivery_gls_asm/models/gls_asm_master_data.py
+Comment: 
+
 Filename: odoo/addons/delivery_gls_asm/models/gls_asm_request.py
 Comment: 
 
 Filename: odoo/addons/delivery_gls_asm/models/stock_picking.py
 Comment: 
 
 Filename: odoo/addons/delivery_gls_asm/readme/CONFIGURE.rst
@@ -78,20 +81,20 @@
 
 Filename: odoo/addons/delivery_gls_asm/wizard/gls_asm_manifest_wizard.py
 Comment: 
 
 Filename: odoo/addons/delivery_gls_asm/wizard/gls_asm_manifest_wizard_views.xml
 Comment: 
 
-Filename: odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/METADATA
+Filename: odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/METADATA
 Comment: 
 
-Filename: odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/WHEEL
+Filename: odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/WHEEL
 Comment: 
 
-Filename: odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/top_level.txt
+Filename: odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/RECORD
+Filename: odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/delivery_gls_asm/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2020 Tecnativa - David Vidal
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 {
     "name": "Delivery GLS-ASM",
     "summary": "Delivery Carrier implementation for GLS with ASMRed API",
-    "version": "12.0.1.0.7",
+    "version": "12.0.1.0.8",
     "category": "Stock",
     "website": "https://github.com/OCA/l10n-spain",
     "author": "Tecnativa, "
               "Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "application": False,
     "installable": True,
```

## odoo/addons/delivery_gls_asm/i18n/delivery_gls_asm.pot

```diff
@@ -10,15 +10,15 @@
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/delivery_carrier.py:228
+#: code:addons/delivery_gls_asm/models/delivery_carrier.py:233
 #, python-format
 msgid "\n"
 "            GLS ASM API doesn't provide methods to compute delivery rates, so\n"
 "            you should relay on another price method instead or override this\n"
 "            one in your custom code.\n"
 "        "
 msgstr ""
@@ -287,15 +287,15 @@
 
 #. module: delivery_gls_asm
 #: model:ir.model.fields,field_description:delivery_gls_asm.field_stock_picking__gls_asm_public_tracking_ref
 msgid "GLS Barcode"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/delivery_carrier.py:216
+#: code:addons/delivery_gls_asm/models/delivery_carrier.py:221
 #, python-format
 msgid "GLS Cancellation failed with reason: %s"
 msgstr ""
 
 #. module: delivery_gls_asm
 #: model_terms:ir.ui.view,arch_db:delivery_gls_asm.view_delivery_carrier_form
 msgid "GLS Configuration"
@@ -303,41 +303,41 @@
 
 #. module: delivery_gls_asm
 #: model:ir.ui.menu,name:delivery_gls_asm.menu_gls_asm_manifest
 msgid "GLS Deliveries Manifest"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/delivery_carrier.py:222
+#: code:addons/delivery_gls_asm/models/delivery_carrier.py:227
 #, python-format
 msgid "GLS Expedition with reference %s cancelled"
 msgstr ""
 
 #. module: delivery_gls_asm
 #: model_terms:ir.ui.view,arch_db:delivery_gls_asm.view_picking_form
 msgid "GLS Label"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/delivery_carrier.py:257
+#: code:addons/delivery_gls_asm/models/delivery_carrier.py:262
 #: model:ir.actions.act_window,name:delivery_gls_asm.action_delivery_gls_asm_manifest_wizard
 #: model:ir.actions.report,name:delivery_gls_asm.gls_asm_manifest_report
 #: model_terms:ir.ui.view,arch_db:delivery_gls_asm.delivery_manifest_wizard_form
 #, python-format
 msgid "GLS Manifest"
 msgstr ""
 
 #. module: delivery_gls_asm
 #: model:ir.model.fields,field_description:delivery_gls_asm.field_delivery_carrier__gls_asm_service
 #: model:ir.model.fields,field_description:delivery_gls_asm.field_gls_asm_minifest_wizard__carrier_id
 msgid "GLS Service"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/delivery_carrier.py:172
+#: code:addons/delivery_gls_asm/models/delivery_carrier.py:177
 #, python-format
 msgid "GLS Shipping extra info:\n"
 "barcode: %s"
 msgstr ""
 
 #. module: delivery_gls_asm
 #: model:ir.model.fields,field_description:delivery_gls_asm.field_delivery_carrier__gls_asm_uid
@@ -347,37 +347,37 @@
 #. module: delivery_gls_asm
 #: code:addons/delivery_gls_asm/models/stock_picking.py:27
 #, python-format
 msgid "GLS label for %s"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/gls_asm_request.py:297
+#: code:addons/delivery_gls_asm/models/gls_asm_request.py:189
 #, python-format
 msgid "GLS returned an error trying to record the shipping for {}.\n"
-"Error:\n"
+"Error code {}:\n"
 "{}"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/delivery_carrier.py:149
+#: code:addons/delivery_gls_asm/models/delivery_carrier.py:154
 #, python-format
 msgid "GLS-ASM API doesn't admit a reference number higher than 15 characters. In order to handle it, they trim thereference and as the reference is unique to every customer we soon would have duplicated reference collisions. To prevent this, you should edit your picking sequence to a max of 15 characters."
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/gls_asm_request.py:318
+#: code:addons/delivery_gls_asm/models/gls_asm_request.py:212
 #, python-format
 msgid "GLS: No response from server getting state from ref {}.\n"
 "Traceback:\n"
 "{}"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/gls_asm_request.py:347
+#: code:addons/delivery_gls_asm/models/gls_asm_request.py:241
 #, python-format
 msgid "GLS: No response from server printing label with ref {}.\n"
 "Traceback:\n"
 "{}"
 msgstr ""
 
 #. module: delivery_gls_asm
@@ -478,23 +478,23 @@
 
 #. module: delivery_gls_asm
 #: selection:delivery.carrier,gls_asm_shiptime:0
 msgid "Masivo"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/gls_asm_request.py:404
+#: code:addons/delivery_gls_asm/models/gls_asm_request.py:298
 #, python-format
 msgid "No response from server getting manifisto for GLS.\n"
 "Traceback:\n"
 "{}"
 msgstr ""
 
 #. module: delivery_gls_asm
-#: code:addons/delivery_gls_asm/models/gls_asm_request.py:286
+#: code:addons/delivery_gls_asm/models/gls_asm_request.py:174
 #, python-format
 msgid "No response from server recording GLS delivery {}.\n"
 "Traceback:\n"
 "{}"
 msgstr ""
 
 #. module: delivery_gls_asm
@@ -709,14 +709,20 @@
 
 #. module: delivery_gls_asm
 #: model:ir.model,name:delivery_gls_asm.model_stock_picking
 msgid "Transfer"
 msgstr ""
 
 #. module: delivery_gls_asm
+#: code:addons/delivery_gls_asm/models/gls_asm_request.py:186
+#, python-format
+msgid "Unknown"
+msgstr ""
+
+#. module: delivery_gls_asm
 #: model:ir.model.fields,help:delivery_gls_asm.field_delivery_carrier__gls_last_request
 #: model:ir.model.fields,help:delivery_gls_asm.field_delivery_carrier__gls_last_response
 msgid "Used for issues debugging"
 msgstr ""
 
 #. module: delivery_gls_asm
 #: selection:delivery.carrier,gls_asm_service:0
```

## odoo/addons/delivery_gls_asm/models/delivery_carrier.py

```diff
@@ -1,16 +1,21 @@
 # Copyright 2020 Tecnativa - David Vidal
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
+from xml.sax.saxutils import escape
+
 from odoo import _, fields, models
 from odoo.exceptions import UserError
-from xml.sax.saxutils import escape
+
+from .gls_asm_master_data import (
+    GLS_ASM_SERVICES,
+    GLS_DELIVERY_STATES_STATIC,
+    GLS_POSTAGE_TYPE,
+    GLS_SHIPPING_TIMES,
+)
 from .gls_asm_request import GlsAsmRequest
-from .gls_asm_request import (
-    GLS_ASM_SERVICES, GLS_SHIPPING_TIMES, GLS_POSTAGE_TYPE,
-    GLS_DELIVERY_STATES_STATIC)
 
 
 class DeliveryCarrier(models.Model):
     _inherit = "delivery.carrier"
 
     delivery_type = fields.Selection(selection_add=[("gls_asm", "GLS ASM")])
     gls_asm_uid = fields.Char(
```

## odoo/addons/delivery_gls_asm/models/gls_asm_request.py

```diff
@@ -1,141 +1,29 @@
 # Copyright 2020 Tecnativa - David Vidal
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
-from odoo import _
-from odoo.exceptions import UserError
-import logging
 import binascii
+import logging
 import os
+
+from odoo import _
+from odoo.exceptions import UserError
+
+from .gls_asm_master_data import GLS_ERROR_CODES
+
 _logger = logging.getLogger(__name__)
 
 try:
     from suds.client import Client
     from suds.sax.text import Raw
     from suds.sudsobject import asdict
 except (ImportError, IOError) as err:
     _logger.debug(err)
 
 
-GLS_ASM_SERVICES = [
-    ('1', 'COURIER'),
-    ('2', 'VALIJA'),
-    ('5', 'BICI'),
-    ('6', 'CARGA'),
-    ('7', 'RECOGIDA'),
-    ('8', 'RECOGIDA CRUZADA'),
-    ('9', 'DEVOLUCION'),
-    ('10', 'RETORNO'),
-    ('11', 'IBEX'),
-    ('12', 'INTERNACIONAL EXPRESS'),
-    ('13', 'INTERNACIONAL ECONOMY'),
-    ('14', 'DISTRIBUCION PROPIA'),
-    ('15', 'OTROS PUENTES'),
-    ('16', 'PROPIO AGENTE'),
-    ('17', 'RECOGIDA SIN MERCANCIA'),
-    ('18', 'DISTRIBUCION  RED'),
-    ('19', 'OPERACIONES RED'),
-    ('20', 'CARGA MARITIMA'),
-    ('21', 'GLASS'),
-    ('22', 'EURO SMALL'),
-    ('23', 'PREPAGO'),
-    ('24', 'OPTIPLUS'),
-    ('25', 'EASYBAG'),
-    ('26', 'CORREO INTERNO'),
-    ('27', '14H SOBRES'),
-    ('28', '24H SOBRES'),
-    ('29', '72H SOBRES'),
-    ('30', 'ASM0830'),
-    ('31', 'CAN MUESTRAS'),
-    ('32', 'RC.SELLADA'),
-    ('33', 'RECANALIZA'),
-    ('34', 'INT PAQUET'),
-    ('35', 'dPRO'),
-    ('36', 'Int. WEB'),
-    ('37', 'ECONOMY'),
-    ('38', 'SERVICIOS RUTAS'),
-    ('39', 'REC. INT'),
-    ('40', 'SERVICIO LOCAL MOTO'),
-    ('41', 'SERVICIO LOCAL FURGONETA'),
-    ('42', 'SERVICIO LOCAL F. GRANDE'),
-    ('43', 'SERVICIO LOCAL CAMION'),
-    ('44', 'SERVICIO LOCAL'),
-    ('45', 'RECOGIDA MEN. MOTO'),
-    ('46', 'RECOGIDA MEN. FURGONETA'),
-    ('47', 'RECOGIDA MEN. F.GRANDE'),
-    ('48', 'RECOGIDA MEN. CAMION'),
-    ('49', 'RECOGIDA MENSAJERO'),
-    ('50', 'SERVICIOS ESPECIALES'),
-    ('51', 'REC. INT WW'),
-    ('52', 'COMPRAS'),
-    ('53', 'MR1'),
-    ('54', 'EURO ESTANDAR'),
-    ('55', 'INTERC. EUROESTANDAR'),
-    ('56', 'RECOGIDA ECONOMY'),
-    ('57', 'REC. INTERCIUDAD ECONOMY'),
-    ('58', 'RC. PARCEL SHOP'),
-    ('59', 'ASM BUROFAX'),
-    ('60', 'ASM GO'),
-    ('66', 'ASMTRAVELLERS'),
-    ('74', 'EUROBUSINESS PARCEL'),
-    ('76', 'EUROBUSINESS SMALL PARCEL'),
-]
-
-GLS_SHIPPING_TIMES = [
-    ("0", "10:00 Service"),
-    ("2", "14:00 Service"),
-    ("3", "BusinessParcel"),
-    ("5", "SaturdayService"),
-    ("7", "INTERDIA"),
-    ("9", "Franja Horaria"),
-    ("4", "Masivo"),
-    ("10", "Maritimo"),
-    ("11", "Rec. en NAVE."),
-    ("13", "Ent. Pto. ASM"),
-    ("18", "EconomyParcel"),
-    ("19", "ParcelShop"),
-]
-
-GLS_POSTAGE_TYPE = [
-    ("P", "Prepaid"),
-    ("D", "Cash On Delivery"),
-]
-
-GLS_DELIVERY_STATES_STATIC = {
-    "-10": "shipping_recorded_in_carrier",  # GRABADO
-    "0": "shipping_recorded_in_carrier",  # MANIFESTADA
-    "2": "in_transit",  # EN TRANSITO A DESTINO
-    "3": "in_transit",  # EN DELEGACION DESTINO
-    "20": "incidence",  # PERDIDA / ROTURA
-    "5": "canceled_shipment",  # ANULADA
-    "6": "in_transit",  # EN REPARTO
-    "7": "customer_delivered",  # ENTREGADO
-    "8": "customer_delivered",  # ENTREGA PARCIAL
-    "9": "in_transit",  # ALMACENADO
-    "10": "incidence",  # DEVUELTA
-    "11": "incidence",  # PENDIENTE DATOS, EN  DELEGACION
-    "1": "incidence",  # RETENIDA EN DELEGACION
-    "91": "incidence",  # CON INCIDENCIA
-    "90": "incidence",  # CERRADO DEFINITIVO
-    "50": "in_transit",  # PRECONFIRMADA ENTREGA
-    "51": "incidence",  # ENTREGA ANULADA (DEVUELTA)
-    "12": "incidence",  # DEVUELTA AL CLIENTE
-    "13": "incidence",  # POSIBLE DEVOLUCION
-    "14": "incidence",  # SOLICITUD DE DEVOLUCION
-    "15": "incidence",  # EN DEVOLUCION
-    "16": "in_transit",  # EN DELEGACION ORIGEN
-    "17": "incidence",  # DESTRUIDO POR ORDEN DEL CLIENTE
-    "18": "incidence",  # RETENIDO POR ORDEN DE PAGA
-    "19": "in_transit",  # EN PLATAFORMA DE DESTINO
-    "21": "incidence",  # RECANALIZADA (A EXTINGUIR)
-    "22": "in_transit",  # ENTREGADO EN ASM PARCELSHOP
-    "25": "in_transit",  # ASM PARCELSHOP CONFIRMA RECEPCION
-}
-
-
-class GlsAsmRequest():
+class GlsAsmRequest:
     """Interface between GLS-ASM SOAP API and Odoo recordset
        Abstract GLS-ASM API Operations to connect them with Odoo
 
        Not all the features are implemented, but could be easily extended with
        the provided API. We leave the operations empty for future.
     """
 
@@ -285,28 +173,34 @@
         except Exception as e:
             raise UserError(_(
                 "No response from server recording GLS delivery {}.\n"
                 "Traceback:\n{}").format(vals.get("referencia_c", ""), e))
         # Convert result suds object to dict and set the root conveniently
         # GLS API Errors have codes below 0 so we have to
         # convert to int as well
-        res = self._recursive_asdict(res)['Servicios']['Envio']
+        res = self._recursive_asdict(res)["Servicios"]["Envio"]
         res["gls_sent_xml"] = xml
         _logger.debug(res)
         res["_return"] = int(res["Resultado"]["_return"])
         if res["_return"] < 0:
-            raise UserError(_(
-                "GLS returned an error trying to record the shipping for {}.\n"
-                "Error:\n{}").format(
-                    vals.get("referencia_c", ""),
-                    res.get("Errores", {}).get(
-                        "Error", "code {}".format(res["_return"]))))
-        if res.get('Etiquetas', {}).get('Etiqueta', {}).get("value"):
-            res["gls_label"] = (
-                binascii.a2b_base64(res["Etiquetas"]["Etiqueta"]["value"]))
+            res["_return_error"] = GLS_ERROR_CODES.get(
+                str(res["_return"]), _("Unknown")
+            )
+            raise UserError(
+                _(
+                    "GLS returned an error trying to record the shipping for {}.\n"
+                    "Error code {}:\n{}"
+                ).format(
+                    vals.get("referencia_c", ""), res["_return"], res["_return_error"]
+                )
+            )
+        if res.get("Etiquetas", {}).get("Etiqueta", {}).get("value"):
+            res["gls_label"] = binascii.a2b_base64(
+                res["Etiquetas"]["Etiqueta"]["value"]
+            )
         return res
 
     def _get_delivery_info(self, reference=False):
         """Get delivery info recorded in GLS for the given reference
         :param str reference -- GLS tracking number
         :returns: shipping info dict
         """
```

## Comparing `odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/METADATA` & `odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo12-addon-delivery-gls-asm
-Version: 12.0.1.0.7
+Version: 12.0.1.0.8
 Summary: Delivery Carrier implementation for GLS with ASMRed API
 Home-page: https://github.com/OCA/l10n-spain
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/RECORD` & `odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/RECORD`

 * *Files 12% similar despite different names*

```diff
@@ -1,17 +1,18 @@
 odoo/addons/delivery_gls_asm/README.rst,sha256=ec82MXWDyZ0Dd6VsXRLovd1KITeB2gcZuml-QNZtEis,6898
 odoo/addons/delivery_gls_asm/__init__.py,sha256=R3l5zcM1DHY7iqr3kt92069kmImpPafRbNSzv6p_hBE,42
-odoo/addons/delivery_gls_asm/__manifest__.py,sha256=TRfxbOy1TKZBi3Td6v180Pnyl42xMbK1YSURvQ8E70c,867
+odoo/addons/delivery_gls_asm/__manifest__.py,sha256=XZTo4ZhCEEhYBnQx-6aUKWFixSDYfkWJssdE_DV65S4,867
 odoo/addons/delivery_gls_asm/api/gls_asm_api.wsdl,sha256=70h-zJ4oGKgyFgWtKByd5TJ5KRcUUOSOeS3wrc3oO7Q,51160
 odoo/addons/delivery_gls_asm/data/delivery_asm_data.xml,sha256=yAV3F62F3HSw9Q2elhIIl_AUocUBgMtcB2tvAqWskn4,375
-odoo/addons/delivery_gls_asm/i18n/delivery_gls_asm.pot,sha256=MMbwskDwZg2nmAgcRrTDK-2P5FmBcyvhIAR69RgD8pc,19271
+odoo/addons/delivery_gls_asm/i18n/delivery_gls_asm.pot,sha256=ppbDn6RsIV6gj8xrfEw9gkCai-tqUP46dcYFYx2AHlw,19413
 odoo/addons/delivery_gls_asm/i18n/es.po,sha256=heih3j4oqvYuJpK29HPRwrfDxL_zKcEiHaBMZ2Vm9rw,21770
 odoo/addons/delivery_gls_asm/models/__init__.py,sha256=gLwxW_s4kCT2TxBc-4hR_el1SQ78NDAJ3cr4a6YY4Ew,89
-odoo/addons/delivery_gls_asm/models/delivery_carrier.py,sha256=vDQaOsH-gwbY0wH14N3fygNPPbKOReC0aVwVN9wiyzw,11555
-odoo/addons/delivery_gls_asm/models/gls_asm_request.py,sha256=fNcTTB0041ktvbquOYpE--KzB74wejZXF76hfSbO3-k,16266
+odoo/addons/delivery_gls_asm/models/delivery_carrier.py,sha256=1W1rb1yyrXwRa3BODXl2chG0grkmT5eYYw0BvKV0DwQ,11571
+odoo/addons/delivery_gls_asm/models/gls_asm_master_data.py,sha256=iQbuQLcoMgbfnXj1vxU-PD7GvU3f8NZtTbnnmyCDxW8,8741
+odoo/addons/delivery_gls_asm/models/gls_asm_request.py,sha256=Ez5SnLLzKF9Y736IV56fgNoZI2EhxzDkkmAmEgGc1UE,12844
 odoo/addons/delivery_gls_asm/models/stock_picking.py,sha256=ZQVodWuLoNu5EL9TxMGY5u3jb_qeX8E0432OB5uGg7w,1021
 odoo/addons/delivery_gls_asm/readme/CONFIGURE.rst,sha256=F3d53IGj9_6aQWydiCfBlQ-9df0onHZJ5lKKLjTgDKo,586
 odoo/addons/delivery_gls_asm/readme/CONTRIBUTORS.rst,sha256=1v8RVohEtpFYYq_juSbiR8NvH3IRmZqsZE3Jx3_Y31I,61
 odoo/addons/delivery_gls_asm/readme/DESCRIPTION.rst,sha256=NI6pV45fKpeOoMPBJF9JSC7NMmYvkhWerMTbqr_VJCQ,162
 odoo/addons/delivery_gls_asm/readme/INSTALL.rst,sha256=88hUfCAl9Dr6BrugkIkw2kQzPKe6itsjumupGpuHhUk,335
 odoo/addons/delivery_gls_asm/readme/ROADMAP.rst,sha256=ZyZo0o89qoUT4hZKf6Ac0hfx5bScwWH1DfCC4vrjcR0,292
 odoo/addons/delivery_gls_asm/readme/USAGE.rst,sha256=pVE4ORSDC_5b2oy3ClZ_TGEKVCburZ1UkCEvGY0cAOo,2828
@@ -22,11 +23,11 @@
 odoo/addons/delivery_gls_asm/tests/test_delivery_gls_asm.py,sha256=oyiOeX-mAFaD58SFlVpwGdFxzN97d4Eyf3_EIs8oRn0,4193
 odoo/addons/delivery_gls_asm/views/delivery_asm_view.xml,sha256=0_xhPE_fSwmnYLkWBuoCBzmaZYzikN1AOHJhcw1dcn0,2721
 odoo/addons/delivery_gls_asm/views/gls_asm_manifest_template.xml,sha256=0nWbTU915UOREqLPKJHka3-D5bZfLgjV3VwsNXkE1-8,8378
 odoo/addons/delivery_gls_asm/views/stock_picking_views.xml,sha256=Ut505OahlM8GMITDtwUlbpzMPGOPpXNUYvbeFOckvCk,986
 odoo/addons/delivery_gls_asm/wizard/__init__.py,sha256=p3LM1SJR4UPEj9heIav_2Kpf1vzfN4FwrR6mIHIwfSQ,38
 odoo/addons/delivery_gls_asm/wizard/gls_asm_manifest_wizard.py,sha256=yCUT0Pcol7Y4w9VtEqIkBNPyAbaUFXy3HS_ud6OKr1k,1516
 odoo/addons/delivery_gls_asm/wizard/gls_asm_manifest_wizard_views.xml,sha256=BRRQsepjt5VRzRjtTNYJ7FlZmk53Sl8KJeME7n788mk,882
-odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/METADATA,sha256=8QYvWS25p9eow7Up_2yMrtgV2zy_w-ARLYjTsx6hf_c,7586
-odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo12_addon_delivery_gls_asm-12.0.1.0.7.dist-info/RECORD,,
+odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/METADATA,sha256=PU3crP3IhD8Imtss_U1gFNu6gnte8ZgIo90AAdJS6Uw,7586
+odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo12_addon_delivery_gls_asm-12.0.1.0.8.dist-info/RECORD,,
```

