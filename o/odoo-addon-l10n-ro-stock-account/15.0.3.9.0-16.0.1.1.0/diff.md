# Comparing `tmp/odoo_addon_l10n_ro_stock_account-15.0.3.9.0-py3-none-any.whl.zip` & `tmp/odoo_addon_l10n_ro_stock_account-16.0.1.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,47 +1,57 @@
-Zip file size: 49959 bytes, number of entries: 45
--rw-r--r--  2.0 unx     3436 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/README.rst
--rw-r--r--  2.0 unx       79 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/__init__.py
--rw-r--r--  2.0 unx     1096 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/__manifest__.py
--rw-r--r--  2.0 unx     8682 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/init_hook.py
--rw-r--r--  2.0 unx     9577 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/i18n/l10n_ro_stock_account.pot
--rw-r--r--  2.0 unx    10543 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/i18n/ro.po
--rw-r--r--  2.0 unx      887 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/migrations/15.0.1.6.1/post-migration.py
--rw-r--r--  2.0 unx     3569 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/migrations/15.0.1.6.1/pre-migration.py
--rw-r--r--  2.0 unx      258 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/__init__.py
--rw-r--r--  2.0 unx      588 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/account_account.py
--rw-r--r--  2.0 unx     4602 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/account_invoice.py
--rw-r--r--  2.0 unx     9631 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/product.py
--rw-r--r--  2.0 unx      655 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/res_company.py
--rw-r--r--  2.0 unx     8730 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/stock_landed_cost.py
--rw-r--r--  2.0 unx     1428 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/stock_location.py
--rw-r--r--  2.0 unx    24396 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/stock_move.py
--rw-r--r--  2.0 unx      866 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/stock_picking.py
--rw-r--r--  2.0 unx     4314 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/models/stock_valuation_layer.py
--rw-r--r--  2.0 unx      303 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       95 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      566 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/static/description/icon.png
--rw-r--r--  2.0 unx    12854 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/static/description/index.html
--rw-r--r--  2.0 unx      228 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/__init__.py
--rw-r--r--  2.0 unx    19818 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/common.py
--rw-r--r--  2.0 unx     8579 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/test_consum.py
--rw-r--r--  2.0 unx     2067 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/test_inventory.py
--rw-r--r--  2.0 unx      754 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/test_product.py
--rw-r--r--  2.0 unx     2655 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/test_purchase.py
--rw-r--r--  2.0 unx     1558 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/test_reception_return_not_fifo.py
--rw-r--r--  2.0 unx      515 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/test_retur.py
--rw-r--r--  2.0 unx     4403 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/tests/test_sale.py
--rw-r--r--  2.0 unx      675 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/views/account_account_view.xml
--rw-r--r--  2.0 unx     1403 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/views/product_category_view.xml
--rw-r--r--  2.0 unx      892 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/views/product_template_view.xml
--rw-r--r--  2.0 unx      922 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/views/stock_landed_cost_view.xml
--rw-r--r--  2.0 unx     1998 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/views/stock_location_view.xml
--rw-r--r--  2.0 unx      806 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/views/stock_picking_view.xml
--rw-r--r--  2.0 unx     1285 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/views/stock_valuation_layer_views.xml
--rw-r--r--  2.0 unx       35 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/wizard/__init__.py
--rw-r--r--  2.0 unx     1043 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return.py
--rw-r--r--  2.0 unx     1331 b- defN 23-Jan-19 08:55 odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return_views.xml
--rw-r--r--  2.0 unx     4191 b- defN 23-Jan-19 08:56 odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jan-19 08:56 odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jan-19 08:56 odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     5126 b- defN 23-Jan-19 08:56 odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/RECORD
-45 files, 167536 bytes uncompressed, 41245 bytes compressed:  75.4%
+Zip file size: 67044 bytes, number of entries: 55
+-rw-r--r--  2.0 unx     3436 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/README.rst
+-rw-r--r--  2.0 unx       79 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/__init__.py
+-rw-r--r--  2.0 unx     1198 b- defN 23-May-30 07:39 odoo/addons/l10n_ro_stock_account/__manifest__.py
+-rw-r--r--  2.0 unx    12467 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/init_hook.py
+-rw-r--r--  2.0 unx    16065 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/i18n/l10n_ro_stock_account.pot
+-rw-r--r--  2.0 unx    17030 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/i18n/ro.po
+-rw-r--r--  2.0 unx      434 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/__init__.py
+-rw-r--r--  2.0 unx      588 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/account_account.py
+-rw-r--r--  2.0 unx     6119 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/account_move.py
+-rw-r--r--  2.0 unx      419 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/l10n_ro_stock_valuation_layer_tracking.py
+-rw-r--r--  2.0 unx     3176 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/product_category.py
+-rw-r--r--  2.0 unx    16503 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/product_product.py
+-rw-r--r--  2.0 unx     3103 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/product_template.py
+-rw-r--r--  2.0 unx      655 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/res_company.py
+-rw-r--r--  2.0 unx    10102 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/stock_landed_cost.py
+-rw-r--r--  2.0 unx     1428 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/stock_location.py
+-rw-r--r--  2.0 unx    31057 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/stock_move.py
+-rw-r--r--  2.0 unx     1668 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/stock_move_line.py
+-rw-r--r--  2.0 unx     1334 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/stock_picking.py
+-rw-r--r--  2.0 unx     1108 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/stock_quant.py
+-rw-r--r--  2.0 unx     8827 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/models/stock_valuation_layer.py
+-rw-r--r--  2.0 unx      303 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       95 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      197 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/security/ir.model.access.csv
+-rw-r--r--  2.0 unx      566 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/static/description/icon.png
+-rw-r--r--  2.0 unx    12854 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/static/description/index.html
+-rw-r--r--  2.0 unx      367 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/__init__.py
+-rw-r--r--  2.0 unx    23812 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/common.py
+-rw-r--r--  2.0 unx     4872 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/common2.py
+-rw-r--r--  2.0 unx     9814 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_consum.py
+-rw-r--r--  2.0 unx     2074 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_inventory.py
+-rw-r--r--  2.0 unx     3741 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_po_landed_cost_sale.py
+-rw-r--r--  2.0 unx     3729 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_po_sale_landed_cost.py
+-rw-r--r--  2.0 unx      760 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_product.py
+-rw-r--r--  2.0 unx     3745 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_purchase.py
+-rw-r--r--  2.0 unx     1932 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_reception_return_not_fifo.py
+-rw-r--r--  2.0 unx      515 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_retur.py
+-rw-r--r--  2.0 unx     5707 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_sale.py
+-rw-r--r--  2.0 unx     5202 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/tests/test_svl_vacuum_location.py
+-rw-r--r--  2.0 unx      675 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/views/account_account_view.xml
+-rw-r--r--  2.0 unx     1403 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/views/product_category_view.xml
+-rw-r--r--  2.0 unx      892 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/views/product_template_view.xml
+-rw-r--r--  2.0 unx      922 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/views/stock_landed_cost_view.xml
+-rw-r--r--  2.0 unx     1998 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/views/stock_location_view.xml
+-rw-r--r--  2.0 unx     1989 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/views/stock_picking_view.xml
+-rw-r--r--  2.0 unx     3778 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/views/stock_valuation_layer_views.xml
+-rw-r--r--  2.0 unx       83 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/wizard/__init__.py
+-rw-r--r--  2.0 unx     1316 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return.py
+-rw-r--r--  2.0 unx     1362 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return_views.xml
+-rw-r--r--  2.0 unx     1102 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/wizard/stock_valuation_layer_revaluation.py
+-rw-r--r--  2.0 unx      936 b- defN 23-May-30 07:38 odoo/addons/l10n_ro_stock_account/wizard/stock_valuation_layer_revaluation_views.xml
+-rw-r--r--  2.0 unx     4192 b- defN 23-May-30 07:39 odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-30 07:39 odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-30 07:39 odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     6350 b- defN 23-May-30 07:39 odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/RECORD
+55 files, 244176 bytes uncompressed, 56270 bytes compressed:  77.0%
```

## zipnote {}

```diff
@@ -12,74 +12,95 @@
 
 Filename: odoo/addons/l10n_ro_stock_account/i18n/l10n_ro_stock_account.pot
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/i18n/ro.po
 Comment: 
 
-Filename: odoo/addons/l10n_ro_stock_account/migrations/15.0.1.6.1/post-migration.py
+Filename: odoo/addons/l10n_ro_stock_account/models/__init__.py
 Comment: 
 
-Filename: odoo/addons/l10n_ro_stock_account/migrations/15.0.1.6.1/pre-migration.py
+Filename: odoo/addons/l10n_ro_stock_account/models/account_account.py
 Comment: 
 
-Filename: odoo/addons/l10n_ro_stock_account/models/__init__.py
+Filename: odoo/addons/l10n_ro_stock_account/models/account_move.py
 Comment: 
 
-Filename: odoo/addons/l10n_ro_stock_account/models/account_account.py
+Filename: odoo/addons/l10n_ro_stock_account/models/l10n_ro_stock_valuation_layer_tracking.py
+Comment: 
+
+Filename: odoo/addons/l10n_ro_stock_account/models/product_category.py
 Comment: 
 
-Filename: odoo/addons/l10n_ro_stock_account/models/account_invoice.py
+Filename: odoo/addons/l10n_ro_stock_account/models/product_product.py
 Comment: 
 
-Filename: odoo/addons/l10n_ro_stock_account/models/product.py
+Filename: odoo/addons/l10n_ro_stock_account/models/product_template.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/models/res_company.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/models/stock_landed_cost.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/models/stock_location.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/models/stock_move.py
 Comment: 
 
+Filename: odoo/addons/l10n_ro_stock_account/models/stock_move_line.py
+Comment: 
+
 Filename: odoo/addons/l10n_ro_stock_account/models/stock_picking.py
 Comment: 
 
+Filename: odoo/addons/l10n_ro_stock_account/models/stock_quant.py
+Comment: 
+
 Filename: odoo/addons/l10n_ro_stock_account/models/stock_valuation_layer.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/readme/CONTRIBUTORS.rst
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/readme/DESCRIPTION.rst
 Comment: 
 
+Filename: odoo/addons/l10n_ro_stock_account/security/ir.model.access.csv
+Comment: 
+
 Filename: odoo/addons/l10n_ro_stock_account/static/description/icon.png
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/static/description/index.html
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/tests/__init__.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/tests/common.py
 Comment: 
 
+Filename: odoo/addons/l10n_ro_stock_account/tests/common2.py
+Comment: 
+
 Filename: odoo/addons/l10n_ro_stock_account/tests/test_consum.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/tests/test_inventory.py
 Comment: 
 
+Filename: odoo/addons/l10n_ro_stock_account/tests/test_po_landed_cost_sale.py
+Comment: 
+
+Filename: odoo/addons/l10n_ro_stock_account/tests/test_po_sale_landed_cost.py
+Comment: 
+
 Filename: odoo/addons/l10n_ro_stock_account/tests/test_product.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/tests/test_purchase.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/tests/test_reception_return_not_fifo.py
@@ -87,14 +108,17 @@
 
 Filename: odoo/addons/l10n_ro_stock_account/tests/test_retur.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/tests/test_sale.py
 Comment: 
 
+Filename: odoo/addons/l10n_ro_stock_account/tests/test_svl_vacuum_location.py
+Comment: 
+
 Filename: odoo/addons/l10n_ro_stock_account/views/account_account_view.xml
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/views/product_category_view.xml
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/views/product_template_view.xml
@@ -117,20 +141,26 @@
 
 Filename: odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return_views.xml
 Comment: 
 
-Filename: odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/METADATA
+Filename: odoo/addons/l10n_ro_stock_account/wizard/stock_valuation_layer_revaluation.py
+Comment: 
+
+Filename: odoo/addons/l10n_ro_stock_account/wizard/stock_valuation_layer_revaluation_views.xml
+Comment: 
+
+Filename: odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/WHEEL
+Filename: odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/top_level.txt
+Filename: odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/RECORD
+Filename: odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/l10n_ro_stock_account/README.rst

```diff
@@ -10,21 +10,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Mature-brightgreen.png
     :target: https://odoo-community.org/page/development-status
     :alt: Mature
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--romania-lightgray.png?logo=github
-    :target: https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_account
+    :target: https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_account
     :alt: OCA/l10n-romania
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/l10n-romania-15-0/l10n-romania-15-0-l10n_ro_stock_account
+    :target: https://translation.odoo-community.org/projects/l10n-romania-16-0/l10n-romania-16-0-l10n_ro_stock_account
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/177/15.0
+    :target: https://runbot.odoo-community.org/runbot/177/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 Stock accounting for receptions, deliveries, consume, usage_giving, inventory and  production.
 
 **Table of contents**
@@ -34,15 +34,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-romania/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_account%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_account%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -88,10 +88,10 @@
     :target: https://github.com/feketemihai
     :alt: feketemihai
 
 Current `maintainers <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-dhongu| |maintainer-feketemihai| 
 
-This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_account>`_ project on GitHub.
+This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_account>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/l10n_ro_stock_account/__manifest__.py

```diff
@@ -1,11 +1,11 @@
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 {
     "name": "Romania - Stock Accounting",
-    "version": "15.0.3.9.0",
+    "version": "16.0.1.1.0",
     "category": "Localization",
     "summary": "Romania - Stock Accounting",
     "author": "NextERP Romania,"
     "Dorin Hongu,"
     "Forest and Biomass Romania,"
     "Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/l10n-romania",
@@ -14,21 +14,23 @@
         "sale_stock",
         "purchase_stock",
         "l10n_ro_config",
         "l10n_ro_stock",
     ],
     "license": "AGPL-3",
     "data": [
+        "security/ir.model.access.csv",
         "views/account_account_view.xml",
         "views/product_category_view.xml",
         "views/product_template_view.xml",
         "views/stock_landed_cost_view.xml",
         "views/stock_location_view.xml",
         "views/stock_picking_view.xml",
         "views/stock_valuation_layer_views.xml",
         "wizard/stock_picking_return_views.xml",
+        "wizard/stock_valuation_layer_revaluation_views.xml",
     ],
     "pre_init_hook": "pre_init_hook",
     "installable": True,
     "development_status": "Mature",
     "maintainers": ["dhongu", "feketemihai"],
 }
```

## odoo/addons/l10n_ro_stock_account/init_hook.py

```diff
@@ -16,14 +16,15 @@
     at least a few hours.
 
     The pre init script writes the digits from vat fields to the
     l10n_ro_vat_number so that it is not computed by the install.
 
     """
     store_field_l10n_ro_vat_number(cr)
+    store_svl_lot_and_locations(cr)
 
 
 def store_field_l10n_ro_vat_number(cr):
     cr.execute(
         """SELECT column_name
            FROM information_schema.columns
            WHERE table_name='stock_valuation_layer' AND column_name='l10n_ro_account_id'"""
@@ -42,102 +43,102 @@
                 FOREIGN KEY (l10n_ro_account_id)
                 REFERENCES account_account (id) MATCH SIMPLE
                 ON UPDATE NO ACTION
                 ON DELETE RESTRICT;
             """
         )
 
-    logger.info("Computing field l10n_ro_account_id on stock.valuation.layer")
+        logger.info("Computing field l10n_ro_account_id on stock.valuation.layer")
 
-    # do res.company.init()
+        # do res.company.init()
 
-    cr.execute(
-        """SELECT column_name
-           FROM information_schema.columns
-           WHERE table_name='res_company' AND column_name='l10n_ro_accounting'"""
-    )
-
-    if not cr.fetchone():
         cr.execute(
-            """
-            ALTER TABLE res_company ADD COLUMN l10n_ro_accounting boolean;
-            """
+            """SELECT column_name
+            FROM information_schema.columns
+            WHERE table_name='res_company' AND column_name='l10n_ro_accounting'"""
         )
 
-    cr.execute(
-        """
-        UPDATE res_company comp
-        SET l10n_ro_accounting = true
-        FROM res_partner rp
-        WHERE comp.partner_id = rp.id and
-              rp.country_id in (SELECT res_id FROM ir_model_data
-                                WHERE model = 'res.country' and
-                                      name = 'ro' and module='base'
-                               );
-    """
-    )
+        if not cr.fetchone():
+            cr.execute(
+                """
+                ALTER TABLE res_company ADD COLUMN l10n_ro_accounting boolean;
+                """
+            )
 
-    cr.execute(
+        cr.execute(
+            """
+            UPDATE res_company comp
+            SET l10n_ro_accounting = true
+            FROM res_partner rp
+            WHERE comp.partner_id = rp.id and
+                rp.country_id in (SELECT res_id FROM ir_model_data
+                                    WHERE model = 'res.country' and
+                                        name = 'ro' and module='base'
+                                );
         """
-        WITH prepared_data as (
-        SELECT
-            svl.id as svl_id,
-            COALESCE(
-                aml_for_loop.account,
-                replace(irp_ctg.value_reference, 'account.account,', '')::integer
-            ) as account_id
-
-            from stock_valuation_layer svl
-            left join stock_move sm on svl.stock_move_id = sm.id
-            left join product_product pp on pp.id = svl.product_id
-            left join product_template ptmpl on ptmpl.id = pp.product_tmpl_id
-
-            left join ir_property irp_ctg on
-                irp_ctg.res_id = CONCAT('product.category,', ptmpl.categ_id)
-                and sm.company_id = irp_ctg.company_id
-                and irp_ctg.name = 'property_stock_valuation_account_id'
-
-            left join (
-                select sub.move_id, sub.balance, sub.account
-                  from (
-                        select
-                            am.id as move_id,
-                            aa.code,
-                            aml.balance,
-                            COALESCE(
-                                CASE
-                                    WHEN (aa.code like '2%' or aa.code like '3%')
-                                    THEN aml.account_id
-                                    ELSE null
-                                END) account,
-                            row_number() over (partition by am.id order by aa.code) as rnum
-                            from account_move am
-                            left join account_move_line aml on aml.move_id = am.id
-                            left join account_account aa on aa.id = aml.account_id
-                            group by am.id, aa.code, aml.account_id, aml.balance
-                            order by am.id, aa.code
-                 ) as sub where sub.account is not null and sub.rnum = 1
-                 group by sub.move_id, sub.account, sub.balance
-
-            ) as aml_for_loop on
-                aml_for_loop.move_id = svl.account_move_id
-                and round(aml_for_loop.balance - svl.value, 2) = 0
-
-            left join res_company comp on sm.company_id = comp.id
-
-            where comp.l10n_ro_accounting = true
-        order by svl.id
         )
 
-        UPDATE stock_valuation_layer svl
-        SET l10n_ro_account_id = prepared_data.account_id
-        FROM prepared_data
-        WHERE svl.id = prepared_data.svl_id;
-        """
-    )
+        cr.execute(
+            """
+            WITH prepared_data as (
+            SELECT
+                svl.id as svl_id,
+                COALESCE(
+                    aml_for_loop.account,
+                    replace(irp_ctg.value_reference, 'account.account,', '')::integer
+                ) as account_id
+
+                from stock_valuation_layer svl
+                left join stock_move sm on svl.stock_move_id = sm.id
+                left join product_product pp on pp.id = svl.product_id
+                left join product_template ptmpl on ptmpl.id = pp.product_tmpl_id
+
+                left join ir_property irp_ctg on
+                    irp_ctg.res_id = CONCAT('product.category,', ptmpl.categ_id)
+                    and sm.company_id = irp_ctg.company_id
+                    and irp_ctg.name = 'property_stock_valuation_account_id'
+
+                left join (
+                    select sub.move_id, sub.balance, sub.account
+                    from (
+                            select
+                                am.id as move_id,
+                                aa.code,
+                                aml.balance,
+                                COALESCE(
+                                    CASE
+                                        WHEN (aa.code like '2%' or aa.code like '3%')
+                                        THEN aml.account_id
+                                        ELSE null
+                                    END) account,
+                                row_number() over (partition by am.id order by aa.code) as rnum
+                                from account_move am
+                                left join account_move_line aml on aml.move_id = am.id
+                                left join account_account aa on aa.id = aml.account_id
+                                group by am.id, aa.code, aml.account_id, aml.balance
+                                order by am.id, aa.code
+                    ) as sub where sub.account is not null and sub.rnum = 1
+                    group by sub.move_id, sub.account, sub.balance
+
+                ) as aml_for_loop on
+                    aml_for_loop.move_id = svl.account_move_id
+                    and round(aml_for_loop.balance - svl.value, 2) = 0
+
+                left join res_company comp on sm.company_id = comp.id
+
+                where comp.l10n_ro_accounting = true
+            order by svl.id
+            )
+
+            UPDATE stock_valuation_layer svl
+            SET l10n_ro_account_id = prepared_data.account_id
+            FROM prepared_data
+            WHERE svl.id = prepared_data.svl_id;
+            """
+        )
 
     # initializare valued_type
 
     cr.execute(
         """SELECT column_name
            FROM information_schema.columns
            WHERE table_name='stock_valuation_layer' AND column_name='l10n_ro_valued_type'"""
@@ -230,7 +231,104 @@
 
         UPDATE stock_valuation_layer svl
         SET l10n_ro_valued_type = prepared_data.valued_type
         FROM prepared_data
         WHERE svl.id = prepared_data.svl_id;
         """
         )
+
+
+def store_svl_lot_and_locations(cr):
+    # initializare svl.lot_ids
+    cr.execute(
+        """SELECT column_name
+           FROM information_schema.columns
+           WHERE table_name='stock_production_lot_stock_valuation_layer_rel'"""
+    )
+    if not cr.fetchone():
+        cr.execute(
+            """CREATE TABLE stock_production_lot_stock_valuation_layer_rel
+            (stock_valuation_layer_id INTEGER, stock_production_lot_id INTEGER)""",
+        )
+        cr.execute(
+            """
+            INSERT INTO stock_production_lot_stock_valuation_layer_rel (
+                stock_valuation_layer_id, stock_production_lot_id)
+            SELECT svl.id, sml.lot_id
+            FROM stock_valuation_layer svl
+            LEFT JOIN stock_move sm ON svl.stock_move_id = sm.id
+            LEFT JOIN stock_move_line sml ON sml.move_id = sm.id
+            WHERE sml.lot_id is not null
+            """,
+        )
+
+    # initializare svl.l10n_ro_stock_move_line_id
+    cr.execute(
+        """SELECT column_name
+           FROM information_schema.columns
+           WHERE table_name='stock_valuation_layer' AND
+           column_name='l10n_ro_stock_move_line_id'"""
+    )
+
+    if not cr.fetchone():
+        cr.execute(
+            """
+            ALTER TABLE stock_valuation_layer
+            ADD COLUMN l10n_ro_stock_move_line_id integer""",
+        )
+        cr.execute(
+            """
+            UPDATE stock_valuation_layer svl
+            SET l10n_ro_stock_move_line_id = sub.sml_id
+            FROM (
+                SELECT svl.id as svl_id, min(sml.id) as sml_id
+                FROM stock_valuation_layer svl
+                LEFT JOIN stock_move sm on sm.id = svl.stock_move_id
+                LEFT JOIN stock_move_line sml on sml.move_id = sm.id
+                GROUP BY svl.id
+            ) as sub
+            WHERE sub.svl_id = svl.id
+            """,
+        )
+
+    # initializare svl.l10n_ro_location_id, svl.l10n_ro_location_dest_id
+    cr.execute(
+        """SELECT column_name
+           FROM information_schema.columns
+           WHERE table_name='stock_valuation_layer' AND column_name='l10n_ro_location_id'"""
+    )
+    if not cr.fetchone():
+        cr.execute(
+            """
+                ALTER TABLE stock_valuation_layer
+                ADD COLUMN l10n_ro_location_id integer""",
+        )
+        cr.execute(
+            """
+                ALTER TABLE stock_valuation_layer
+                ADD COLUMN l10n_ro_location_dest_id integer""",
+        )
+        cr.execute(
+            """
+            WITH sub as (
+                SELECT
+                    svl.id as svl_id,
+                    CASE WHEN count(sml.id) = 1
+                        THEN min(sml.location_id)
+                        ELSE min(sm.location_id)
+                    END as location_id,
+                    CASE WHEN count(sml.id) = 1
+                        THEN min(sml.location_dest_id)
+                        ELSE min(sm.location_dest_id)
+                    END as location_dest_id
+                FROM stock_valuation_layer svl
+                LEFT JOIN stock_move sm on sm.id = svl.stock_move_id
+                LEFT JOIN stock_move_line sml on sml.move_id = sm.id
+                GROUP BY svl.id
+            )
+
+            UPDATE stock_valuation_layer svl SET
+                l10n_ro_location_id = sub.location_id,
+                l10n_ro_location_dest_id = sub.location_dest_id
+            FROM sub
+            WHERE sub.svl_id = svl.id""",
+        )
```

## odoo/addons/l10n_ro_stock_account/i18n/l10n_ro_stock_account.pot

```diff
@@ -1,23 +1,30 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* l10n_ro_stock_account
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: l10n_ro_stock_account
+#. odoo-python
+#: code:addons/l10n_ro_stock_account/models/stock_landed_cost.py:0
+#, python-format
+msgid " already out"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_account_account
 msgid "Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_account_account__l10n_ro_stock_consume_account_id
 msgid "Account used for stock consume and usage giving operations"
@@ -30,27 +37,55 @@
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_res_company
 msgid "Companies"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#. odoo-python
 #: code:addons/l10n_ro_stock_account/models/stock_landed_cost.py:0
 #, python-format
 msgid ""
 "Cost and adjustments lines do not match. You should maybe recompute the "
 "landed costs."
 msgstr ""
 
 #. module: l10n_ro_stock_account
-#: code:addons/l10n_ro_stock_account/models/product.py:0
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__create_uid
+msgid "Created by"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__create_date
+msgid "Created on"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_form
+msgid "Destination SVL"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__display_name
+msgid "Display Name"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#. odoo-python
+#: code:addons/l10n_ro_stock_account/models/product_category.py:0
 #, python-format
 msgid ""
-"For Romanian Stock Accounting the stock_input, stock_output and "
-"stock_valuation accounts must bethe same for category %s"
+"For Romanian Stock Accounting the stock_input,\n"
+"                          stock_output and stock_valuation accounts must be\n"
+"                          the same for category %s"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__id
+msgid "ID"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_product_product__l10n_ro_property_stock_valuation_account_id
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_product_template__l10n_ro_property_stock_valuation_account_id
 msgid ""
 "In Romania accounting is only one account for valuation/input/output. If "
@@ -68,30 +103,77 @@
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_account_move_line__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_category__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_product__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_template__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_landed_cost__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_move__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_picking__is_l10n_ro_record
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_quant__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_adjustment_lines__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__is_l10n_ro_record
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer_revaluation__is_l10n_ro_record
 msgid "Is Romanian Record"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.actions.act_window,name:l10n_ro_stock_account.l10n_ro_stock_account_move_action
+msgid "Journal Entries"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_account_move
 msgid "Journal Entry"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_account_move_line
 msgid "Journal Item"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.view_picking_add_price_unit_form
+msgid "Journal Items"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer_revaluation__l10n_ro_location_id
+msgid "L10N Ro Location"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_return_picking_line__l10n_ro_origin_ret_move_qty
+msgid "L10N Ro Origin Ret Move Qty"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_return_picking_line__l10n_ro_origin_ret_move_qty_warn
+msgid "L10N Ro Origin Ret Move Qty Warn"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking____last_update
+msgid "Last Modified on"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__write_uid
+msgid "Last Updated by"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__write_date
+msgid "Last Updated on"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_revaluation_form_view
+msgid "Location"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields.selection,name:l10n_ro_stock_account.selection__stock_landed_cost__l10n_ro_cost_type__normal
 msgid "Normal"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.view_location_form_inherit
 msgid "Only for Romania"
@@ -108,50 +190,57 @@
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_product_category__l10n_ro_hide_stock_in_out_account
 msgid ""
 "Only for Romania, to hide stock_input and stock_output accounts because they"
 " are the same as stock_valuation account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
-#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_return_picking_line__origin_ret_move_qty
-msgid "Origin Ret Move Qty"
-msgstr ""
-
-#. module: l10n_ro_stock_account
-#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_return_picking_line__origin_ret_move_qty_check
-msgid "Origin Ret Move Qty Check"
+#. odoo-python
+#: code:addons/l10n_ro_stock_account/models/stock_landed_cost.py:0
+#, python-format
+msgid "Please configure Stock Expense Account for product: %s."
 msgstr ""
 
 #. module: l10n_ro_stock_account
-#: model:ir.model,name:l10n_ro_stock_account.model_product_product
+#: model:ir.model,name:l10n_ro_stock_account.model_product_template
 msgid "Product"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_product_category
 msgid "Product Category"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_move_line
 msgid "Product Moves (Stock Move Line)"
 msgstr ""
 
 #. module: l10n_ro_stock_account
-#: model:ir.model,name:l10n_ro_stock_account.model_product_template
-msgid "Product Template"
+#: model:ir.model,name:l10n_ro_stock_account.model_product_product
+msgid "Product Variant"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__quantity
+msgid "Quantity"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.view_stock_return_picking_form
 msgid ""
 "Quantity more than existing. You will return different stock valuations."
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model,name:l10n_ro_stock_account.model_stock_quant
+msgid "Quants"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.view_stock_return_picking_form
 msgid "Remaining Qty"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_return_picking_line
 msgid "Return Picking Line"
@@ -164,14 +253,29 @@
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_account_account__l10n_ro_stock_consume_account_id
 msgid "Romania - Consume Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_location_dest_id
+msgid "Romania - Destination Location"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_svl_track_src_ids
+msgid "Romania - Destination Tracking"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_svl_src_ids
+msgid "Romania - Destination Valuation"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_location__l10n_ro_property_account_expense_location_id
 msgid "Romania - Expense Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_category__l10n_ro_hide_stock_in_out_account
 msgid "Romania - Hide Odoo Stock In/Out Accounts"
@@ -194,59 +298,137 @@
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_landed_cost__l10n_ro_cost_type
 msgid "Romania - Landed Cost Type"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_lot_ids
+msgid "Romania - Serial Numbers"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_location_id
+msgid "Romania - Source Location"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_svl_track_dest_ids
+msgid "Romania - Source Tracking"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_svl_dest_ids
+msgid "Romania - Source Valuation"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_stock_move_line_id
+msgid "Romania - Stock Move Line"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_product__l10n_ro_property_stock_valuation_account_id
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_template__l10n_ro_property_stock_valuation_account_id
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_location__l10n_ro_property_stock_valuation_account_id
 msgid "Romania - Stock Valuation Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model,name:l10n_ro_stock_account.model_l10n_ro_stock_valuation_layer_tracking
+msgid "Romania - Tracking layer stock valuation"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_account_id
 msgid "Romania - Valuation Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_valued_type
 msgid "Romania - Valued Type"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_form
+msgid "Source SVL"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_landed_cost
 msgid "Stock Landed Cost"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_move
 msgid "Stock Move"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_move_line__stock_valuation_ids
+msgid "Stock Valuation"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_valuation_layer
 msgid "Stock Valuation Layer"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__svl_dest_id
+msgid "Svl Dest"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__svl_src_id
+msgid "Svl Src"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_stock_location__l10n_ro_property_account_expense_location_id
 msgid ""
 "This account will overwrite the expense accounts from product or category."
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_stock_location__l10n_ro_property_account_income_location_id
 msgid ""
 "This account will overwrite the income accounts from product or category."
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_form
+msgid "Total Quantity"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_form
+msgid "Total Value"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_picking
 msgid "Transfer"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_valuation_adjustment_lines
 msgid "Valuation Adjustment Lines"
 msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__value
+msgid "Value"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model,name:l10n_ro_stock_account.model_stock_valuation_layer_revaluation
+msgid "Wizard model to reavaluate a stock inventory for a product"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#. odoo-python
+#: code:addons/l10n_ro_stock_account/models/stock_move_line.py:0
+#, python-format
+msgid ""
+"You cannot decrease the quantity of a move line. Please create a return."
+msgstr ""
```

## odoo/addons/l10n_ro_stock_account/i18n/ro.po

```diff
@@ -13,14 +13,20 @@
 "Language: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: l10n_ro_stock_account
+#: code:addons/l10n_ro_stock_account/models/stock_landed_cost.py:0
+#, python-format
+msgid " already out"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_account_account
 msgid "Account"
 msgstr "Cont"
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_account_account__l10n_ro_stock_consume_account_id
 msgid "Account used for stock consume and usage giving operations"
@@ -41,22 +47,46 @@
 #, python-format
 msgid ""
 "Cost and adjustments lines do not match. You should maybe recompute the "
 "landed costs."
 msgstr ""
 
 #. module: l10n_ro_stock_account
-#: code:addons/l10n_ro_stock_account/models/product.py:0
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__create_uid
+msgid "Created by"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__create_date
+msgid "Created on"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_form
+msgid "Destination SVL"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__display_name
+msgid "Display Name"
+msgstr "Nume afi»ôat"
+
+#. module: l10n_ro_stock_account
+#: code:addons/l10n_ro_stock_account/models/product_category.py:0
 #, python-format
 msgid ""
-"For Romanian Stock Accounting the stock_input, stock_output and "
-"stock_valuation accounts must bethe same for category %s"
+"For Romanian Stock Accounting the stock_input,\n"
+"                          stock_output and stock_valuation accounts must be\n"
+"                          the same for category %s"
 msgstr ""
-"Pentru contabilitatea din Rom√¢nia contul de intrare, contul de ie»ôire »ôi "
-"contul de evaluare trebuie sƒÉ fie acela»ôi pentru categoria %s "
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__id
+msgid "ID"
+msgstr "ID"
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_product_product__l10n_ro_property_stock_valuation_account_id
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_product_template__l10n_ro_property_stock_valuation_account_id
 msgid ""
 "In Romania accounting is only one account for valuation/input/output. If "
 "this value is set, we will use it, otherwise will use the category value. "
@@ -73,30 +103,77 @@
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_account_move_line__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_category__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_product__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_template__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_landed_cost__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_move__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_picking__is_l10n_ro_record
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_quant__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_adjustment_lines__is_l10n_ro_record
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__is_l10n_ro_record
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer_revaluation__is_l10n_ro_record
 msgid "Is Romanian Record"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.actions.act_window,name:l10n_ro_stock_account.l10n_ro_stock_account_move_action
+msgid "Journal Entries"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_account_move
 msgid "Journal Entry"
 msgstr "NotƒÉ contabilƒÉ"
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_account_move_line
 msgid "Journal Item"
 msgstr "Element jurnal"
 
 #. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.view_picking_add_price_unit_form
+msgid "Journal Items"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer_revaluation__l10n_ro_location_id
+msgid "L10N Ro Location"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_return_picking_line__l10n_ro_origin_ret_move_qty
+msgid "L10N Ro Origin Ret Move Qty"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_return_picking_line__l10n_ro_origin_ret_move_qty_warn
+msgid "L10N Ro Origin Ret Move Qty Warn"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking____last_update
+msgid "Last Modified on"
+msgstr "Ultima modificare la"
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__write_uid
+msgid "Last Updated by"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__write_date
+msgid "Last Updated on"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_revaluation_form_view
+msgid "Location"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields.selection,name:l10n_ro_stock_account.selection__stock_landed_cost__l10n_ro_cost_type__normal
 msgid "Normal"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.view_location_form_inherit
 msgid "Only for Romania"
@@ -113,21 +190,17 @@
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_product_category__l10n_ro_hide_stock_in_out_account
 msgid ""
 "Only for Romania, to hide stock_input and stock_output accounts because they "
 "are the same as stock_valuation account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
-#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_return_picking_line__origin_ret_move_qty
-msgid "Origin Ret Move Qty"
-msgstr ""
-
-#. module: l10n_ro_stock_account
-#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_return_picking_line__origin_ret_move_qty_check
-msgid "Origin Ret Move Qty Check"
+#: code:addons/l10n_ro_stock_account/models/stock_landed_cost.py:0
+#, python-format
+msgid "Please configure Stock Expense Account for product: %s."
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_product_product
 msgid "Product"
 msgstr ""
 
@@ -143,20 +216,30 @@
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_product_template
 msgid "Product Template"
 msgstr "»òablon produs"
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__quantity
+msgid "Quantity"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.view_stock_return_picking_form
 msgid ""
 "Quantity more than existing. You will return different stock valuations."
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model,name:l10n_ro_stock_account.model_stock_quant
+msgid "Quants"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.view_stock_return_picking_form
 msgid "Remaining Qty"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_return_picking_line
 msgid "Return Picking Line"
@@ -169,14 +252,29 @@
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_account_account__l10n_ro_stock_consume_account_id
 msgid "Romania - Consume Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_location_dest_id
+msgid "Romania - Destination Location"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_svl_track_src_ids
+msgid "Romania - Destination Tracking"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_svl_src_ids
+msgid "Romania - Destination Valuation"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_location__l10n_ro_property_account_expense_location_id
 msgid "Romania - Expense Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_category__l10n_ro_hide_stock_in_out_account
 msgid "Romania - Hide Odoo Stock In/Out Accounts"
@@ -199,90 +297,166 @@
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_landed_cost__l10n_ro_cost_type
 msgid "Romania - Landed Cost Type"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_lot_ids
+msgid "Romania - Serial Numbers"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_location_id
+msgid "Romania - Source Location"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_svl_track_dest_ids
+msgid "Romania - Source Tracking"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_svl_dest_ids
+msgid "Romania - Source Valuation"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_stock_move_line_id
+msgid "Romania - Stock Move Line"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_product__l10n_ro_property_stock_valuation_account_id
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_product_template__l10n_ro_property_stock_valuation_account_id
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_location__l10n_ro_property_stock_valuation_account_id
 msgid "Romania - Stock Valuation Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model:ir.model,name:l10n_ro_stock_account.model_l10n_ro_stock_valuation_layer_tracking
+msgid "Romania - Tracking layer stock valuation"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_account_id
 msgid "Romania - Valuation Account"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_valuation_layer__l10n_ro_valued_type
 msgid "Romania - Valued Type"
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_form
+msgid "Source SVL"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_landed_cost
 msgid "Stock Landed Cost"
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_move
 msgid "Stock Move"
 msgstr "Mi»ôcare stoc"
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_stock_move_line__stock_valuation_ids
+msgid "Stock Valuation"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_valuation_layer
 msgid "Stock Valuation Layer"
 msgstr "Nivel evaluare stoc"
 
 #. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__svl_dest_id
+msgid "Svl Dest"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__svl_src_id
+msgid "Svl Src"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_stock_location__l10n_ro_property_account_expense_location_id
 msgid ""
 "This account will overwrite the expense accounts from product or category."
 msgstr ""
 
 #. module: l10n_ro_stock_account
 #: model:ir.model.fields,help:l10n_ro_stock_account.field_stock_location__l10n_ro_property_account_income_location_id
 msgid ""
 "This account will overwrite the income accounts from product or category."
 msgstr ""
 
 #. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_form
+msgid "Total Quantity"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model_terms:ir.ui.view,arch_db:l10n_ro_stock_account.stock_valuation_layer_form
+msgid "Total Value"
+msgstr ""
+
+#. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_picking
 msgid "Transfer"
 msgstr "Transfer"
 
 #. module: l10n_ro_stock_account
 #: model:ir.model,name:l10n_ro_stock_account.model_stock_valuation_adjustment_lines
 msgid "Valuation Adjustment Lines"
 msgstr ""
 
+#. module: l10n_ro_stock_account
+#: model:ir.model.fields,field_description:l10n_ro_stock_account.field_l10n_ro_stock_valuation_layer_tracking__value
+msgid "Value"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: model:ir.model,name:l10n_ro_stock_account.model_stock_valuation_layer_revaluation
+msgid "Wizard model to reavaluate a stock inventory for a product"
+msgstr ""
+
+#. module: l10n_ro_stock_account
+#: code:addons/l10n_ro_stock_account/models/stock_move_line.py:0
+#, python-format
+msgid ""
+"You cannot decrease the quantity of a move line. Please create a return."
+msgstr ""
+
+#, python-format
+#~ msgid ""
+#~ "For Romanian Stock Accounting the stock_input, stock_output and "
+#~ "stock_valuation accounts must bethe same for category %s"
+#~ msgstr ""
+#~ "Pentru contabilitatea din Rom√¢nia contul de intrare, contul de ie»ôire »ôi "
+#~ "contul de evaluare trebuie sƒÉ fie acela»ôi pentru categoria %s "
+
 #~ msgid "Allow stock account change from locations"
 #~ msgstr "Permite modificare conturilor de stoc din loca»õie"
 
-#~ msgid "Display Name"
-#~ msgstr "Nume afi»ôat"
-
 #~ msgid "Expense Account"
 #~ msgstr "Cont cheltuialƒÉ"
 
-#~ msgid "ID"
-#~ msgstr "ID"
-
 #~ msgid "Income Account"
 #~ msgstr "Cont venit"
 
 #~ msgid "Is a notice"
 #~ msgstr "Este un aviz"
 
 #~ msgid "Is notice"
 #~ msgstr "Este aviz"
 
-#~ msgid "Last Modified on"
-#~ msgstr "Ultima modificare la"
-
 #, python-format
 #~ msgid "Price difference"
 #~ msgstr "Diferen»õƒÉ pre»õ"
 
 #~ msgid "Valued Type"
 #~ msgstr "Tip evaluare"
```

## odoo/addons/l10n_ro_stock_account/models/__init__.py

```diff
@@ -1,9 +1,14 @@
 from . import account_account
-from . import account_invoice
-from . import product
+from . import account_move
+from . import l10n_ro_stock_valuation_layer_tracking
+from . import product_category
+from . import product_product
+from . import product_template
 from . import res_company
 from . import stock_landed_cost
 from . import stock_location
 from . import stock_move
+from . import stock_move_line
 from . import stock_picking
 from . import stock_valuation_layer
+from . import stock_quant
```

## odoo/addons/l10n_ro_stock_account/models/stock_landed_cost.py

```diff
@@ -16,23 +16,31 @@
         [("normal", "Normal")],
         default="normal",
         string="Romania - Landed Cost Type",
         states={"done": [("readonly", True)]},
     )
 
     def _prepare_landed_cost_svl_vals(self, line, linked_layer, amount):
+        if line:
+            stock_move_id = line.move_id
+            product_id = line.move_id.product_id
+        else:
+            stock_move_id = linked_layer.stock_move_id
+            product_id = linked_layer.stock_move_id.product_id
+
         return {
             "value": amount,
             "unit_cost": 0,
             "quantity": 0,
             "remaining_qty": 0,
             "stock_valuation_layer_id": linked_layer.id,
             "description": self.name,
-            "stock_move_id": line.move_id.id,
-            "product_id": line.move_id.product_id.id,
+            "stock_move_id": stock_move_id.id,
+            "l10n_ro_stock_move_line_id": linked_layer.l10n_ro_stock_move_line_id.id,
+            "product_id": product_id.id,
             "stock_landed_cost_id": self.id,
             "company_id": self.company_id.id,
         }
 
     def l10n_ro_create_valuation_layer(self, line, linked_layer, amount):
         vals = self._prepare_landed_cost_svl_vals(line, linked_layer, amount)
         valuation_layer = self.env["stock.valuation.layer"].create(vals)
@@ -62,68 +70,86 @@
             move = self.env["account.move"]
             move_vals = {
                 "journal_id": cost.account_journal_id.id,
                 "date": cost.date,
                 "ref": cost.name,
                 "line_ids": [],
                 "move_type": "entry",
-                "partner_id": cost.vendor_bill_id.commercial_partner_id.id,
             }
             valuation_layer_ids = []
-            valuation_layers = self.env["stock.valuation.layer"]
             cost_to_add_byproduct = defaultdict(lambda: 0.0)
             for line in cost.valuation_adjustment_lines.filtered(
                 lambda line: line.move_id
             ):
+                # Add distributed cost for each stock valuation layer.
+                product = line.move_id.product_id
+                for svl in line.move_id.stock_valuation_layer_ids.filtered(
+                    lambda s: s.quantity != 0
+                ):
 
-                quantity = sum(
-                    line.move_id.stock_valuation_layer_ids.mapped("quantity")
-                )
-                if quantity > 0:
-                    remaining_qty = sum(
-                        line.move_id.stock_valuation_layer_ids.mapped("remaining_qty")
+                    cost_to_add = (
+                        svl.quantity / line.move_id.quantity_done
+                    ) * line.additional_landed_cost
+                    valuation_layer = cost.l10n_ro_create_valuation_layer(
+                        line, svl, cost_to_add
                     )
-                else:
-                    # daca am o receptie negativa - (retur de paleti)
-                    remaining_qty = -1 * quantity
-                linked_layer = line.move_id.stock_valuation_layer_ids[:1]
-
-                # Prorate the value at what's still in stock
-                cost_to_add = (
-                    remaining_qty / line.move_id.product_qty
-                ) * line.additional_landed_cost
-
-                # Romania change: extract method to create valuation layer
-                if not cost.company_id.currency_id.is_zero(cost_to_add):
-                    new_valuation_layers = cost.l10n_ro_create_valuation_layer(
-                        line, linked_layer, cost_to_add
-                    )
-                    linked_layer.remaining_value += cost_to_add
-                    valuation_layer_ids.append(new_valuation_layers.ids)
-                    valuation_layers += new_valuation_layers
-                # End Romania change
+                    svl.remaining_value += cost_to_add
+                    valuation_layer_ids.append(valuation_layer.id)
+                    if product.cost_method == "average":
+                        cost_to_add_byproduct[product] += cost_to_add
+                    # Create separate account move for each svl
+                    if product.valuation == "real_time":
+                        svl_move_vals = move_vals
+                        amls = line._l10n_ro_prepare_accounting_entries(
+                            valuation_layer, svl_move_vals, cost_to_add, svl_type="in"
+                        )
+                        if amls:
+                            svl_move_vals["line_ids"] = amls
+                            svl_move = move.create(svl_move_vals)
+                            valuation_layer.update({"account_move_id": svl_move.id})
+                            svl_move._post()
+
+                    # Add separate svl for each quantity out
+                    for svl_out in svl.l10n_ro_svl_dest_ids.filtered(
+                        lambda s: s.quantity != 0
+                    ):
+                        out_cost_to_add = (
+                            svl_out.quantity / svl.quantity
+                        ) * cost_to_add
+                        valuation_layer_out = cost.l10n_ro_create_valuation_layer(
+                            self.env["stock.valuation.adjustment.lines"],
+                            svl_out,
+                            out_cost_to_add,
+                        )
+                        svl.remaining_value += out_cost_to_add
+                        valuation_layer_ids.append(valuation_layer_out.id)
+
+                        if product.cost_method == "average":
+                            cost_to_add_byproduct[product] += out_cost_to_add
+                        # Create separate account move for each put svl
+                        if product.valuation == "real_time":
+                            svl_move_vals = move_vals
+                            amls = line._l10n_ro_prepare_accounting_entries(
+                                valuation_layer_out,
+                                svl_move_vals,
+                                out_cost_to_add,
+                                svl_type="out",
+                            )
+                            if amls:
+                                svl_move_vals["line_ids"] = amls
+                                svl_move = move.create(svl_move_vals)
+                                valuation_layer_out.update(
+                                    {"account_move_id": svl_move.id}
+                                )
+                                svl_move._post()
 
-                # Update the AVCO
-                product = line.move_id.product_id
-                if product.cost_method == "average":
-                    cost_to_add_byproduct[product] += cost_to_add
                 # Products with manual inventory valuation are ignored because
                 # they do not need to create journal entries.
                 if product.valuation != "real_time":
                     continue
-                # `remaining_qty` is negative if the move is out and delivered
-                # products that were not in stock.
-
-                # Romania change: extract method to generate accounting entries
-                # for quantity already delivered.
-                move_vals = line._prepare_out_accounting_entries(
-                    move_vals, move, remaining_qty
-                )
-                # Romania end change
-
             # batch standard price computation avoid recompute quantity_svl at each iteration
             products = self.env["product.product"].browse(
                 p.id for p in cost_to_add_byproduct.keys()
             )
             for (
                 product
             ) in products:  # iterate on recordset to prefetch efficiently quantity_svl
@@ -132,75 +158,83 @@
                 ):
                     product.with_company(cost.company_id).sudo().with_context(
                         disable_auto_svl=True
                     ).standard_price += (
                         cost_to_add_byproduct[product] / product.quantity_svl
                     )
 
-            # move_vals['stock_valuation_layer_ids'] = [(6, None, valuation_layer_ids)]
-            # We will only create the accounting entry when there are defined lines
-            # (the lines will be those linked to products of real_time valuation category).
             cost_vals = {"state": "done"}
-            if move_vals.get("line_ids"):
-                move = move.create(move_vals)
-                cost_vals.update({"account_move_id": move.id})
-                move.line_ids.write({"partner_id": move.partner_id.id})
-
             cost.write(cost_vals)
-            if cost.account_move_id:
-                move._post()
-                valuation_layers.write({"account_move_id": cost.account_move_id.id})
-            if (
-                cost.vendor_bill_id
-                and cost.vendor_bill_id.state == "posted"
-                and cost.company_id.anglo_saxon_accounting
-            ):
-                all_amls = cost.vendor_bill_id.line_ids | cost.account_move_id.line_ids
-                for product in cost.cost_lines.product_id:
-                    accounts = product.product_tmpl_id.get_product_accounts()
-                    input_account = accounts["stock_input"]
-                    all_amls.filtered(
-                        lambda aml: aml.account_id == input_account
-                        and not aml.reconciled
-                    ).reconcile()
-
         return True
 
 
 class AdjustmentLines(models.Model):
     _name = "stock.valuation.adjustment.lines"
     _inherit = ["stock.valuation.adjustment.lines", "l10n.ro.mixin"]
 
-    def _prepare_out_accounting_entries(self, move_vals, move, remaining_qty):
-        qty_out = 0
-        if self.move_id._is_in():
-            qty_out = self.move_id.product_qty - remaining_qty
-        elif self.move_id._is_out():
-            qty_out = self.move_id.product_qty
-        move_vals["line_ids"] += self._create_accounting_entries(move, qty_out)
-        return move_vals
+    def _l10n_ro_prepare_accounting_entries(
+        self, valuation_layer, move_vals, cost_to_add, svl_type="in"
+    ):
+        """Prepare the account move lines (accounting entries) for each valuation layer."""
+        self.ensure_one()
+        cost_product = self.cost_line_id.product_id
+        if not cost_product:
+            return False
+        accounts = self.product_id.product_tmpl_id.get_product_accounts()
+        debit_account_id = (
+            accounts.get("stock_valuation") and accounts["stock_valuation"].id or False
+        )
+        credit_account_id = (
+            self.cost_line_id.account_id.id
+            or cost_product.categ_id.property_stock_account_input_categ_id.id
+        )
+
+        # If the stock move is dropshipped move we need to get the cost account
+        # instead the stock valuation account
+        if self.move_id._is_dropshipped():
+            debit_account_id = (
+                accounts.get("expense") and accounts["expense"].id or False
+            )
+        already_out_account_id = accounts["stock_output"].id
+
+        if not credit_account_id:
+            raise UserError(
+                _("Please configure Stock Expense Account for product: %s.")
+                % (cost_product.name)
+            )
+        AccountMoveLine = []
+
+        base_line = {
+            "name": self.name,
+            "product_id": self.product_id.id,
+            "quantity": 0,
+        }
+
+        if svl_type == "out":
+            credit_account_id = self.product_id.product_tmpl_id.get_product_accounts()[
+                "expense"
+            ].id
+            debit_account_id = already_out_account_id
+            base_line["name"] += ": " + _(" already out")
+        debit_line = dict(base_line, account_id=debit_account_id)
+        credit_line = dict(base_line, account_id=credit_account_id)
+        if cost_to_add > 0:
+            debit_line["debit"] = cost_to_add
+            credit_line["credit"] = cost_to_add
+        else:
+            # negative cost, reverse the entry
+            debit_line["credit"] = -cost_to_add
+            credit_line["debit"] = -cost_to_add
+        AccountMoveLine.append([0, 0, debit_line])
+        AccountMoveLine.append([0, 0, credit_line])
+
+        return AccountMoveLine
 
     def _create_account_move_line(
         self, move, credit_account_id, debit_account_id, qty_out, already_out_account_id
     ):
         res = super()._create_account_move_line(
             move, credit_account_id, debit_account_id, qty_out, already_out_account_id
         )
         if self.is_l10n_ro_record:
-            # Remove account move lines generated for the same account
-            if credit_account_id == debit_account_id:
-                res = res[2:]
-            if qty_out > 0:
-                if (
-                    credit_account_id == already_out_account_id
-                    and self.additional_landed_cost > 0
-                ):
-                    res = res[2:]
-                if (
-                    debit_account_id == already_out_account_id
-                    and self.additional_landed_cost < 0
-                ):
-                    if credit_account_id == debit_account_id:
-                        res = res[2:]
-                    elif len(res) > 4:
-                        res = res[0:2] + res[4:]
+            return self.env["account.move.line"]
         return res
```

## odoo/addons/l10n_ro_stock_account/models/stock_move.py

```diff
@@ -32,31 +32,179 @@
                 "production_return",  # storno productie
                 "internal_transfer",  # transfer intern
                 "usage_giving",
                 "usage_giving_return",
             ]
         return valued_types
 
+    def _get_price_unit(self):
+        # se caculeaza preturl cu functia standard
+        price_unit = super()._get_price_unit()
+
+        self.ensure_one()
+        if self.is_l10n_ro_record:
+
+            self.env["decimal.precision"].precision_get("Product Price")
+            # If the move is a return, use the original move's price unit.
+            if (
+                self.origin_returned_move_id
+                and self.origin_returned_move_id.sudo().stock_valuation_layer_ids
+            ):
+
+                layers = self.origin_returned_move_id.sudo().stock_valuation_layer_ids
+                quantity = sum(layers.mapped("quantity"))
+                price_unit = (
+                    sum(layers.mapped("value")) / quantity
+                    if not float_is_zero(
+                        quantity, precision_rounding=layers.uom_id.rounding
+                    )
+                    else 0
+                )
+
+        return price_unit
+
     # nu se mai face in mod automat evaluarea la intrare in stoc
     def _create_in_svl(self, forced_quantity=None):
         _logger.debug("SVL:%s" % self.env.context.get("valued_type", ""))
-        if self.env.context.get("standard") or not self.filtered("is_l10n_ro_record"):
-            svl = super(StockMove, self)._create_in_svl(forced_quantity)
-        else:
-            svl = self.env["stock.valuation.layer"]
-        return svl
+        svls = self.env["stock.valuation.layer"]
+        l10n_ro_records = self.filtered("is_l10n_ro_record")
+        if self - l10n_ro_records:
+            svls = super(StockMove, self - l10n_ro_records)._create_in_svl(
+                forced_quantity
+            )
+        if l10n_ro_records and self.env.context.get("standard"):
+            # For Romania, create a valuation layer for each stock move line
+            for move in l10n_ro_records:
+                move = move.with_company(move.company_id)
+                valued_move_lines = move._get_in_move_lines()
+                if not valued_move_lines and forced_quantity:
+                    unit_cost = abs(
+                        move._get_price_unit()
+                    )  # May be negative (i.e. decrease an out move).
+                    if move.product_id.cost_method == "standard":
+                        unit_cost = move.product_id.standard_price
+                    svl_vals = move.product_id._prepare_in_svl_vals(
+                        forced_quantity, unit_cost
+                    )
+                    svl_vals.update(move._prepare_common_svl_vals())
+                    if forced_quantity:
+                        svl_vals["description"] = (
+                            "Correction of %s (modification of past move)"
+                            % move.picking_id.name
+                            or move.name
+                        )
+                    svls = self.env["stock.valuation.layer"].sudo().create(svl_vals)
+                for valued_move_line in valued_move_lines:
+                    move = move.with_context(stock_move_line_id=valued_move_line)
+                    valued_quantity = valued_move_line.product_uom_id._compute_quantity(
+                        valued_move_line.qty_done, move.product_id.uom_id
+                    )
+                    origin_unit_cost = None
+                    tracking = []
+                    if (
+                        move.origin_returned_move_id
+                        and move.origin_returned_move_id.sudo().stock_valuation_layer_ids
+                    ):
+                        origin_domain = move.product_id._l10n_ro_prepare_domain_fifo(
+                            move.company_id,
+                            [("product_id", "=", valued_move_line.product_id.id)],
+                        )
+                        origin_domain = [
+                            (
+                                "stock_move_line_id",
+                                "in",
+                                move.origin_returned_move_id._get_in_move_lines().ids,
+                            )
+                        ] + origin_domain
+                        origin_svls = move._l10n_ro_filter_svl_on_move_line(
+                            origin_domain
+                        )
+                        if origin_svls:
+                            origin_unit_cost = origin_svls[0].unit_cost
+                            tracking = [
+                                (
+                                    origin_svls[0].id,
+                                    valued_quantity,
+                                    origin_unit_cost * valued_quantity,
+                                )
+                            ]
+                    unit_cost = abs(
+                        origin_unit_cost or move._get_price_unit()
+                    )  # May be negative (i.e. decrease an out move).
+                    if move.product_id.cost_method == "standard":
+                        unit_cost = move.product_id.standard_price
+                    svl_vals = move.product_id._prepare_in_svl_vals(
+                        forced_quantity or valued_quantity, unit_cost
+                    )
+                    svl_vals.update(move._prepare_common_svl_vals())
+                    svl_vals.update(
+                        {
+                            "l10n_ro_stock_move_line_id": valued_move_line.id,
+                            "tracking": tracking,
+                        }
+                    )
+                    if forced_quantity:
+                        svl_vals["description"] = (
+                            "Correction of %s (modification of past move)"
+                            % move.picking_id.name
+                            or move.name
+                        )
+                    svls |= self._l10n_ro_create_track_svl([svl_vals])
+        return svls
 
     # nu se mai face in mod automat evaluarea la iserirea din stoc
     def _create_out_svl(self, forced_quantity=None):
         _logger.debug("SVL:%s" % self.env.context.get("valued_type", ""))
-        if self.env.context.get("standard") or not self.filtered("is_l10n_ro_record"):
-            svl = super(StockMove, self)._create_out_svl(forced_quantity)
-        else:
-            svl = self.env["stock.valuation.layer"]
-        return svl
+        svls = self.env["stock.valuation.layer"]
+        l10n_ro_records = self.filtered("is_l10n_ro_record")
+        if self - l10n_ro_records:
+            svls = super(StockMove, self - l10n_ro_records)._create_out_svl(
+                forced_quantity
+            )
+        if l10n_ro_records and self.env.context.get("standard"):
+            # For Romania get a list of valuation layers, to keep traceability
+            # for each incoming price
+            for move in self:
+                move = move.with_company(move.company_id)
+                valued_move_lines = move._get_out_move_lines()
+                for valued_move_line in valued_move_lines:
+                    valued_move_line = valued_move_line.with_context(
+                        stock_move_line_id=valued_move_line
+                    )
+                    move = move.with_context(stock_move_line_id=valued_move_line)
+                    valued_quantity = valued_move_line.product_uom_id._compute_quantity(
+                        valued_move_line.qty_done, move.product_id.uom_id
+                    )
+                    if float_is_zero(
+                        forced_quantity or valued_quantity,
+                        precision_rounding=move.product_id.uom_id.rounding,
+                    ):
+                        continue
+                    svl_vals_list = valued_move_line.product_id._prepare_out_svl_vals(
+                        forced_quantity or valued_quantity,
+                        valued_move_line.company_id,
+                    )
+                    for svl_vals in svl_vals_list:
+                        svl_vals.update(move._prepare_common_svl_vals())
+                        svl_vals.update(
+                            {
+                                "l10n_ro_stock_move_line_id": valued_move_line.id,
+                            }
+                        )
+                        if forced_quantity:
+                            svl_vals["description"] = (
+                                "Correction of %s (modification of past move)"
+                                % valued_move_line.picking_id.name
+                                or valued_move_line.name
+                            )
+                        svl_vals["description"] += svl_vals.pop(
+                            "rounding_adjustment", ""
+                        )
+                        svls |= move._l10n_ro_create_track_svl([svl_vals])
+        return svls
 
     def _is_returned(self, valued_type):
         """Este tot timpul False deoarece noi tratam fiecare caz in parte
         de retur si fxam conturile"""
         if not self.is_l10n_ro_record:
             return super()._is_returned(valued_type)
         return False
@@ -130,15 +278,14 @@
             self.is_l10n_ro_record
             and self.location_id.usage == "inventory"
             and self.location_dest_id.usage == "internal"
         )
         return it_is
 
     def _create_plus_inventory_svl(self, forced_quantity=None):
-
         move = self.with_context(standard=True, valued_type="plus_inventory")
         return move._create_in_svl(forced_quantity)
 
     def _is_minus_inventory(self):
         it_is = (
             self.is_l10n_ro_record
             and self.location_id.usage == "internal"
@@ -171,14 +318,24 @@
             and self.location_dest_id.usage == "production"
             and self.origin_returned_move_id
         )
         return it_is
 
     def _create_production_return_svl(self, forced_quantity=None):
         move = self.with_context(standard=True, valued_type="production_return")
+        if (
+            move.origin_returned_move_id
+            and move.origin_returned_move_id.sudo().stock_valuation_layer_ids
+        ):
+            move = move.with_context(
+                origin_return_candidates=move.origin_returned_move_id.sudo()
+                .stock_valuation_layer_ids.filtered(lambda sv: sv.remaining_qty > 0)
+                .ids
+            )
+
         return move._create_out_svl(forced_quantity)
 
     def _is_consumption(self):
         """Este un conusm de materiale in productie"""
         it_is = (
             self.is_l10n_ro_record
             and self._is_out()
@@ -212,55 +369,64 @@
             and self.location_dest_id.usage == "internal"
             and self.location_id.usage == "internal"
         )
         return it_is
 
     # cred ca este mai bine sa generam doua svl - o intrare si o iesire
     def _create_internal_transfer_svl(self, forced_quantity=None):
-        svl_vals_list = []
-        for move in self.with_context(standard=True, valued_type="internal_transfer"):
+        svls = self.env["stock.valuation.layer"]
+        for move in self:
+            move = move.with_context(standard=True, valued_type="internal_transfer")
             move = move.with_company(move.company_id.id)
 
             valued_move_lines = move.move_line_ids
-            valued_quantity = 0
             for valued_move_line in valued_move_lines:
-                valued_quantity += valued_move_line.product_uom_id._compute_quantity(
+                move = move.with_context(stock_move_line_id=valued_move_line)
+                valued_quantity = valued_move_line.product_uom_id._compute_quantity(
                     valued_move_line.qty_done, move.product_id.uom_id
                 )
-            if float_is_zero(
-                forced_quantity or valued_quantity,
-                precision_rounding=move.product_id.uom_id.rounding,
-            ):
-                continue
-            svl_vals = move.product_id._prepare_out_svl_vals(
-                forced_quantity or valued_quantity, move.company_id
-            )
-            svl_vals.update(move._prepare_common_svl_vals())
-            if forced_quantity:
-                svl_vals["description"] = (
-                    "Correction of %s (modification of past move)"
-                    % move.picking_id.name
-                    or move.name
-                )
-            svl_vals["description"] += svl_vals.pop("rounding_adjustment", "")
-            svl_vals_list.append(svl_vals)
-
-            new_svl_vals = svl_vals.copy()
-            new_svl_vals.update(
-                {
-                    "quantity": abs(svl_vals.get("quantity", 0)),
-                    "remaining_qty": abs(svl_vals.get("quantity", 0)),
-                    "unit_cost": abs(svl_vals.get("unit_cost", 0)),
-                    "value": abs(svl_vals.get("value", 0)),
-                    "remaining_value": abs(svl_vals.get("value", 0)),
-                }
-            )
-            svl_vals_list.append(new_svl_vals)
-
-        return self.env["stock.valuation.layer"].sudo().create(svl_vals_list)
+                if float_is_zero(
+                    forced_quantity or valued_quantity,
+                    precision_rounding=move.product_id.uom_id.rounding,
+                ):
+                    continue
+                svl_vals_list = move.product_id._prepare_out_svl_vals(
+                    forced_quantity or valued_quantity, move.company_id
+                )
+                for svl_vals in svl_vals_list:
+                    svl_vals.update(move._prepare_common_svl_vals())
+                    if forced_quantity:
+                        svl_vals["description"] = (
+                            "Correction of %s (modification of past move)"
+                            % move.picking_id.name
+                            or move.name
+                        )
+                    svl_vals["description"] += svl_vals.pop("rounding_adjustment", "")
+                    svl_vals["l10n_ro_stock_move_line_id"] = valued_move_line.id
+                    svls |= self._l10n_ro_create_track_svl([svl_vals])
+
+                    new_svl_vals = svl_vals.copy()
+                    new_svl_vals.update(
+                        {
+                            "quantity": abs(svl_vals.get("quantity", 0)),
+                            "remaining_qty": abs(svl_vals.get("quantity", 0)),
+                            "unit_cost": abs(svl_vals.get("unit_cost", 0)),
+                            "value": abs(svl_vals.get("value", 0)),
+                            "remaining_value": abs(svl_vals.get("value", 0)),
+                            "tracking": [
+                                (
+                                    svls[-1].id,
+                                    abs(svl_vals.get("quantity", 0)),
+                                    abs(svl_vals.get("value", 0)),
+                                )
+                            ],
+                        }
+                    )
+                    svls |= self._l10n_ro_create_track_svl([new_svl_vals])
+        return svls
 
     def _is_usage_giving(self):
         """Este dare in folosinta"""
         it_is = (
             self.is_l10n_ro_record
             and self.location_dest_id.usage == "usage_giving"
             and self._is_out()
@@ -285,18 +451,14 @@
         move = self.with_context(standard=True, valued_type="usage_giving_return")
         return move._create_in_svl(forced_quantity)
 
     def _prepare_common_svl_vals(self):
         vals = super(StockMove, self)._prepare_common_svl_vals()
         if self.is_l10n_ro_record:
             valued_type = self.env.context.get("valued_type")
-            if valued_type == "indefinite":
-                _logger.warning(valued_type)
-            else:
-                _logger.info(valued_type)
             if valued_type:
                 vals["l10n_ro_valued_type"] = valued_type
             vals[
                 "l10n_ro_account_id"
             ] = self.product_id.categ_id.property_stock_valuation_account_id.id
         return vals
 
@@ -330,142 +492,98 @@
         """Accounting Valuation Entries"""
         if self.is_l10n_ro_record:
             svl = self.env["stock.valuation.layer"].browse(svl_id)
             company = self._get_company(svl)
             self = company and self.with_company(company.id) or self
             if company and company.l10n_ro_accounting:
                 self = self.with_context(
-                    valued_type=svl.l10n_ro_valued_type, is_l10n_ro_accounting=True
+                    valued_type=svl.l10n_ro_valued_type, standard=True
                 )
+
         if self.company_id.l10n_ro_accounting and svl.l10n_ro_valued_type in (
             "reception",
             "reception_return",
         ):
             res = []
+            if self.env.context.get("l10n_ro_reception_in_progress"):
+                res = super(StockMove, self)._account_entry_move(
+                    qty, description, svl_id, cost
+                )
         else:
             res = super(StockMove, self)._account_entry_move(
                 qty, description, svl_id, cost
             )
-
         if self.is_l10n_ro_record:
             self._romanian_account_entry_move(qty, description, svl_id, cost)
 
         return res
 
     def _romanian_account_entry_move(self, qty, description, svl_id, cost):
         location_from = self.location_id
         location_to = self.location_dest_id
         svl = self.env["stock.valuation.layer"]
-        account_move_obj = self.env["account.move"]
-        if self._is_consumption() or self._is_consumption_return():
-            if self._is_consumption():
-                (
-                    journal_id,
-                    acc_src,
-                    acc_dest,
-                    acc_valuation,
-                ) = self._get_accounting_data_for_valuation()
-                acc_valuation_rec = self.env["account.account"].browse(acc_valuation)
-                if (
-                    acc_valuation_rec
-                    and acc_valuation_rec.l10n_ro_stock_consume_account_id
-                ):
-                    acc_valuation = (
-                        acc_valuation_rec.l10n_ro_stock_consume_account_id.id
-                    )
-                if acc_src and acc_valuation and acc_src != acc_valuation:
-                    move = self.with_context(valued_type="consume_switch_accounts")
-                    account_move_obj.create(
-                        move._prepare_account_move_vals(
-                            acc_valuation,
-                            acc_src,
-                            journal_id,
-                            qty,
-                            description,
-                            svl,
-                            cost,
-                        )
-                    )
-            if self._is_consumption_return():
-                (
-                    journal_id,
-                    acc_src,
-                    acc_dest,
-                    acc_valuation,
-                ) = self._get_accounting_data_for_valuation()
-                acc_valuation_rec = self.env["account.account"].browse(acc_valuation)
-                if (
-                    acc_valuation_rec
-                    and acc_valuation_rec.l10n_ro_stock_consume_account_id
-                ):
-                    acc_valuation = (
-                        acc_valuation_rec.l10n_ro_stock_consume_account_id.id
-                    )
-                if acc_dest and acc_valuation and acc_dest != acc_valuation:
-                    move = self.with_context(valued_type="consume_switch_accounts")
-                    account_move_obj.create(
-                        move._prepare_account_move_vals(
-                            acc_dest,
-                            acc_valuation,
-                            journal_id,
-                            qty,
-                            description,
-                            svl,
-                            cost,
-                        )
-                    )
+        if self._is_usage_giving() or self._is_consumption():
+            (
+                journal_id,
+                acc_src,
+                acc_dest,
+                acc_valuation,
+            ) = self._get_accounting_data_for_valuation()
+            acc_valuation_rec = self.env["account.account"].browse(acc_valuation)
+            if acc_valuation_rec and acc_valuation_rec.l10n_ro_stock_consume_account_id:
+                acc_valuation = acc_valuation_rec.l10n_ro_stock_consume_account_id.id
+            if acc_src != acc_valuation:
+                self._create_account_move_line(
+                    acc_valuation, acc_src, journal_id, qty, description, svl, cost
+                )
+        if self._is_usage_giving_return() or self._is_consumption_return():
+            (
+                journal_id,
+                acc_src,
+                acc_dest,
+                acc_valuation,
+            ) = self._get_accounting_data_for_valuation()
+            acc_valuation_rec = self.env["account.account"].browse(acc_valuation)
+            if acc_valuation_rec and acc_valuation_rec.l10n_ro_stock_consume_account_id:
+                acc_valuation = acc_valuation_rec.l10n_ro_stock_consume_account_id.id
+            if acc_dest != acc_valuation:
+                self._create_account_move_line(
+                    acc_dest, acc_valuation, journal_id, qty, description, svl, cost
+                )
         if self._is_usage_giving() or self._is_usage_giving_return():
             # inregistrare dare in folosinta 8035
             move = self.with_context(valued_type="usage_giving_secondary")
             (
                 journal_id,
                 acc_src,
                 acc_dest,
                 acc_valuation,
             ) = move._get_accounting_data_for_valuation()
-            account_move_obj.create(
-                move._prepare_account_move_vals(
-                    acc_src, acc_dest, journal_id, qty, description, svl, cost
-                )
+            move._create_account_move_line(
+                acc_src, acc_dest, journal_id, qty, description, svl, cost
             )
 
         if self._is_internal_transfer():
             move = self.with_context(valued_type="internal_transfer")
             (
                 journal_id,
                 acc_src,
                 acc_dest,
                 acc_valuation,
             ) = move._get_accounting_data_for_valuation()
             if location_to.l10n_ro_property_stock_valuation_account_id and cost < 0:
-                account_move_obj.create(
-                    move._prepare_account_move_vals(
-                        acc_dest,
-                        acc_valuation,
-                        journal_id,
-                        qty,
-                        description,
-                        svl_id,
-                        cost,
-                    )
+                move._create_account_move_line(
+                    acc_dest, acc_valuation, journal_id, qty, description, svl_id, cost
                 )
             if location_from.l10n_ro_property_stock_valuation_account_id and cost > 0:
-                account_move_obj.create(
-                    move._prepare_account_move_vals(
-                        acc_src,
-                        acc_valuation,
-                        journal_id,
-                        qty,
-                        description,
-                        svl_id,
-                        cost,
-                    )
+                move._create_account_move_line(
+                    acc_src, acc_valuation, journal_id, qty, description, svl_id, cost
                 )
 
-    def _prepare_account_move_vals(
+    def _create_account_move_line(
         self,
         credit_account_id,
         debit_account_id,
         journal_id,
         qty,
         description,
         svl_id,
@@ -476,22 +594,26 @@
         if (
             self.is_l10n_ro_record
             and credit_account_id == debit_account_id
             and not self._is_usage_giving()
             and not self._is_usage_giving_return()
         ):
             return []
-        return super(StockMove, self)._prepare_account_move_vals(
-            credit_account_id,
-            debit_account_id,
-            journal_id,
-            qty,
-            description,
-            svl_id,
-            cost,
+        if isinstance(svl_id, models.BaseModel):
+            svl_id = svl_id.id
+        return self.env["account.move"].create(
+            self.with_company(self.company_id)._prepare_account_move_vals(
+                credit_account_id,
+                debit_account_id,
+                journal_id,
+                qty,
+                description,
+                svl_id,
+                cost,
+            )
         )
 
     def _get_accounting_data_for_valuation(self):
         journal_id, acc_src, acc_dest, acc_valuation = super(
             StockMove, self
         )._get_accounting_data_for_valuation()
         valued_type = self.env.context.get("valued_type", "indefinite")
@@ -524,15 +646,25 @@
                     acc_src = (
                         location_from.l10n_ro_property_stock_valuation_account_id.id
                     )
                 else:
                     acc_valuation = (
                         location_from.l10n_ro_property_stock_valuation_account_id.id
                     )
-
+                    acc_src = (
+                        location_from.l10n_ro_property_stock_valuation_account_id.id
+                    )
+            # in cazul transferului intern se va face o singura nota
+            if (
+                location_from.l10n_ro_property_stock_valuation_account_id
+                and location_to.l10n_ro_property_stock_valuation_account_id
+            ):
+                acc_valuation = (
+                    location_from.l10n_ro_property_stock_valuation_account_id.id
+                )
             # in Romania iesirea din stoc de face de regula pe contul de cheltuiala
             if valued_type in [
                 "delivery",
                 "consumption",
                 "usage_giving",
                 "production_return",
                 "minus_inventory",
@@ -571,53 +703,31 @@
             if acc_src_rec and acc_src_rec.l10n_ro_stock_consume_account_id:
                 acc_src = acc_src_rec.l10n_ro_stock_consume_account_id.id
             acc_valuation_rec = self.env["account.account"].browse(acc_valuation)
             if acc_valuation_rec and acc_valuation_rec.l10n_ro_stock_consume_account_id:
                 acc_valuation = acc_valuation_rec.l10n_ro_stock_consume_account_id.id
         return journal_id, acc_src, acc_dest, acc_valuation
 
-
-class StockMoveLine(models.Model):
-    _inherit = "stock.move.line"
-
-    @api.model
-    def _create_correction_svl(self, move, diff):
-        super(StockMoveLine, self)._create_correction_svl(move, diff)
-        company_id = self.company_id
-        if not self.company_id and self._context.get("default_company_id"):
-            company_id = self.env["res.company"].browse(
-                self._context["default_company_id"]
-            )
-        if not self.env["res.company"]._check_is_l10n_ro_record(company_id.id):
-            return
-
-        stock_valuation_layers = self.env["stock.valuation.layer"]
-
-        for valued_type in move._get_valued_types():
-            if getattr(move, "_is_%s" % valued_type)():
-
-                if diff < 0 and "_return" not in valued_type:
-                    valued_type = valued_type + "_return"
-                if diff > 0 and "_return" in valued_type:
-                    valued_type = valued_type.replace("_return", "")
-
-                if valued_type == "plus_inventory_return":
-                    valued_type = "minus_inventory"
-                elif valued_type == "minus_inventory_return":
-                    valued_type = "plus_inventory"
-                elif valued_type == "internal_transfer_return":
-                    valued_type = "internal_transfer"
-
-                if hasattr(move, "_create_%s_svl" % valued_type):
-                    stock_valuation_layers |= getattr(
-                        move, "_create_%s_svl" % valued_type
-                    )(forced_quantity=abs(diff))
-
-        for svl in stock_valuation_layers:
-            if not svl.product_id.valuation == "real_time":
-                continue
-            am_vals = svl.stock_move_id._account_entry_move(
-                svl.quantity, svl.description, svl.id, svl.value
-            )
-            if am_vals:
-                account_moves = self.env["account.move"].sudo().create(am_vals)
-                account_moves._post()
+    def _l10n_ro_filter_svl_on_move_line(self, domain):
+        origin_svls = self.env["stock.valuation.layer"].search(domain)
+        return origin_svls
+
+    def _l10n_ro_create_track_svl(self, value_list, **kwargs):
+        sudo_svl = self.env["stock.valuation.layer"].sudo()
+
+        for _index, value in enumerate(value_list):
+            svl_value = sudo_svl._l10n_ro_pre_process_value(
+                value
+            )  # eliminam datele de tracking, filtram valorile SVL
+            new_svl = sudo_svl.create(svl_value)
+            new_svl._l10n_ro_post_process(value)  # executam post create pentru tracking
+            sudo_svl |= new_svl
+        return sudo_svl
+
+    # In case of single move line update locations of the stock move
+    def _action_done(self, cancel_backorder=False):
+        moves = super()._action_done(cancel_backorder=cancel_backorder)
+        for mv in moves:
+            if len(mv.move_line_ids) == 1:
+                mv.location_id = mv.move_line_ids[0].location_id
+                mv.location_dest_id = mv.move_line_ids[0].location_dest_id
+        return moves
```

## odoo/addons/l10n_ro_stock_account/models/stock_picking.py

```diff
@@ -1,12 +1,14 @@
 # Copyright (C) 2014 Forest and Biomass Romania
 # Copyright (C) 2020 NextERP Romania
 # Copyright (C) 2020 Terrabit
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 
+from ast import literal_eval
+
 from odoo import models
 
 
 class StockPicking(models.Model):
     _name = "stock.picking"
     _inherit = ["stock.picking", "l10n.ro.mixin"]
 
@@ -25,7 +27,17 @@
             return super()._is_dropshipped()
 
         self.ensure_one()
         return (
             self.location_id.usage == "customer"
             and self.location_dest_id.usage == "supplier"
         )
+
+    def action_l10n_ro_view_account_moves(self):
+        self.ensure_one()
+        domain = [("move_id.stock_move_id", "in", self.move_ids.ids)]
+        action = self.env["ir.actions.actions"]._for_xml_id(
+            "l10n_ro_stock_account.l10n_ro_stock_account_move_action"
+        )
+        context = literal_eval(action["context"])
+        context.update(self.env.context)
+        return dict(action, domain=domain, context=context)
```

## odoo/addons/l10n_ro_stock_account/models/stock_valuation_layer.py

```diff
@@ -16,31 +16,82 @@
     l10n_ro_invoice_id = fields.Many2one("account.move", string="Romania - Invoice")
     l10n_ro_account_id = fields.Many2one(
         "account.account",
         compute="_compute_account",
         store=True,
         string="Romania - Valuation Account",
     )
+    l10n_ro_stock_move_line_id = fields.Many2one(
+        "stock.move.line", index=True, readonly=True, string="Romania - Stock Move Line"
+    )
+    l10n_ro_location_id = fields.Many2one(
+        "stock.location",
+        compute="_compute_l10n_ro_svl_locations_lot",
+        store=True,
+        index=True,
+        string="Romania - Source Location",
+    )
+    l10n_ro_location_dest_id = fields.Many2one(
+        "stock.location",
+        compute="_compute_l10n_ro_svl_locations_lot",
+        store=True,
+        index=True,
+        string="Romania - Destination Location",
+    )
+    l10n_ro_lot_ids = fields.Many2many(
+        "stock.lot",
+        compute="_compute_l10n_ro_svl_locations_lot",
+        store=True,
+        index=True,
+        string="Romania - Serial Numbers",
+    )
+    l10n_ro_svl_track_dest_ids = fields.One2many(
+        "l10n.ro.stock.valuation.layer.tracking",
+        "svl_src_id",
+        string="Romania - Source Tracking",
+    )
+    l10n_ro_svl_track_src_ids = fields.One2many(
+        "l10n.ro.stock.valuation.layer.tracking",
+        "svl_dest_id",
+        string="Romania - Destination Tracking",
+    )
+    l10n_ro_svl_dest_ids = fields.Many2many(
+        "stock.valuation.layer",
+        compute="_compute_l10n_ro_svl_tracking",
+        string="Romania - Source Valuation",
+    )
+    l10n_ro_svl_src_ids = fields.Many2many(
+        "stock.valuation.layer",
+        compute="_compute_l10n_ro_svl_tracking",
+        string="Romania - Destination Valuation",
+    )
 
     @api.depends("product_id", "account_move_id")
     def _compute_account(self):
         for svl in self.filtered(lambda sv: sv.stock_move_id.is_l10n_ro_record):
             account = self.env["account.account"]
             svl = svl.with_company(svl.stock_move_id.company_id)
 
             loc_dest = svl.stock_move_id.location_dest_id
             loc_scr = svl.stock_move_id.location_id
             account = (
                 svl.product_id.l10n_ro_property_stock_valuation_account_id
                 or svl.product_id.categ_id.property_stock_valuation_account_id
             )
-            if svl.value > 0 and loc_dest.l10n_ro_property_stock_valuation_account_id:
-                account = loc_dest.l10n_ro_property_stock_valuation_account_id
-            if svl.value < 0 and loc_scr.l10n_ro_property_stock_valuation_account_id:
-                account = loc_scr.l10n_ro_property_stock_valuation_account_id
+            if svl.product_id.categ_id.l10n_ro_stock_account_change:
+                if (
+                    svl.value > 0
+                    and loc_dest.l10n_ro_property_stock_valuation_account_id
+                ):
+                    account = loc_dest.l10n_ro_property_stock_valuation_account_id
+                if (
+                    svl.value < 0
+                    and loc_scr.l10n_ro_property_stock_valuation_account_id
+                ):
+                    account = loc_scr.l10n_ro_property_stock_valuation_account_id
             if svl.account_move_id:
                 for aml in svl.account_move_id.line_ids.sorted(
                     lambda l: l.account_id.code
                 ):
                     if aml.account_id.code[0] in ["2", "3"]:
                         if round(aml.balance, 2) == round(svl.value, 2):
                             account = aml.account_id
@@ -89,7 +140,84 @@
                 svl.l10n_ro_invoice_line_id = invoice_lines
                 svl.l10n_ro_invoice_id = invoice_lines.move_id
             else:
                 for line in invoice_lines:
                     if stock_move.date.date() == line.move_id.date:
                         svl.l10n_ro_invoice_line_id = line
                         svl.l10n_ro_invoice_id = line.move_id
+
+    @api.depends("stock_move_id", "l10n_ro_stock_move_line_id")
+    def _compute_l10n_ro_svl_locations_lot(self):
+        for svl in self:
+            record = (
+                svl.l10n_ro_stock_move_line_id
+                if svl.l10n_ro_stock_move_line_id
+                else svl.stock_move_id
+            )
+            svl.l10n_ro_location_id = record.location_id
+            svl.l10n_ro_location_dest_id = record.location_dest_id
+            svl.l10n_ro_lot_ids = (
+                record.lot_id if "lot_id" in record._fields else record.lot_ids
+            )
+
+    def _compute_l10n_ro_svl_tracking(self):
+        for s in self:
+            s.l10n_ro_svl_dest_ids = [
+                (6, 0, s.l10n_ro_svl_track_dest_ids.mapped("svl_dest_id").ids)
+            ]
+            s.l10n_ro_svl_src_ids = [
+                (6, 0, s.l10n_ro_svl_track_src_ids.mapped("svl_src_id").ids)
+            ]
+
+    @api.model
+    def _l10n_ro_pre_process_value(self, value):
+        """
+        Pentru a mapa tracking pe SVL in value pastram o cheie
+        'tracking': [(svl_id, qty).....]
+        inainte sa executam .create() curatam dictionarul.
+        """
+        fields_dict = self._fields.keys()
+        return {
+            svl_key: svl_value
+            for svl_key, svl_value in value.items()
+            if svl_key in fields_dict
+        }
+
+    def _l10n_ro_post_process(self, value):
+        """
+        Pentru a mapa tracking pe SVL in value pastram o cheie
+        'tracking': [(svl_id, qty).....]
+        acum este momentul sa mapam sursa, destinatia si cantitatea.
+        """
+
+        if value.get("l10n_ro_tracking", None):
+            self._l10n_ro_create_tracking(value.get("l10n_ro_tracking"))
+
+    def _l10n_ro_tracking_merge_value(self, svl_id, quantity, value):
+        return {
+            "svl_src_id": svl_id,
+            "quantity": quantity,
+            "value": value,
+        }
+
+    def _l10n_ro_prepare_tracking_value(self, source_svl_qty):
+        svl_tracking_values = []
+        for svl_item in source_svl_qty:
+            svl_tracking_values.append(self._l10n_ro_tracking_merge_value(*svl_item))
+        return svl_tracking_values
+
+    def _l10n_ro_create_tracking(self, source_svl_qty):
+        tracking_values = self._l10n_ro_prepare_tracking_value(source_svl_qty)
+        svl_tracking_ids = self.env["l10n.ro.stock.valuation.layer.tracking"].create(
+            tracking_values
+        )
+        svl_tracking_ids.write({"svl_dest_id": self.id})
+        return svl_tracking_ids
+
+    def _validate_accounting_entries(self):
+        res = super()._validate_accounting_entries()
+        account_moves = self.mapped("account_move_id")
+        account_moves = account_moves.filtered(lambda m: m.state == "draft")
+        if account_moves:
+            account_moves._post()
+
+        return res
```

## odoo/addons/l10n_ro_stock_account/static/description/index.html

### odoo/addons/l10n_ro_stock_account/static/description/index.html

```diff
@@ -367,21 +367,21 @@
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
           <img alt="Mature" src="https://img.shields.io/badge/maturity-Mature-brightgreen.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
-        <a class="reference external" href="https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_account">
+        <a class="reference external" href="https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_account">
           <img alt="OCA/l10n-romania" src="https://img.shields.io/badge/github-OCA%2Fl10n--romania-lightgray.png?logo=github"/>
         </a>
-        <a class="reference external" href="https://translation.odoo-community.org/projects/l10n-romania-15-0/l10n-romania-15-0-l10n_ro_stock_account">
+        <a class="reference external" href="https://translation.odoo-community.org/projects/l10n-romania-16-0/l10n-romania-16-0-l10n_ro_stock_account">
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
-        <a class="reference external" href="https://runbot.odoo-community.org/runbot/177/15.0">
+        <a class="reference external" href="https://runbot.odoo-community.org/runbot/177/16.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <p>Stock accounting for receptions, deliveries, consume, usage_giving, inventory and  production.</p>
       <p>
         <strong>Table of contents</strong>
       </p>
@@ -412,15 +412,15 @@
         </h1>
         <p>
           Bugs are tracked on
           <a class="reference external" href="https://github.com/OCA/l10n-romania/issues">GitHub Issues</a>
           .
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-          <a class="reference external" href="https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_account%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
+          <a class="reference external" href="https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_account%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
           .
         </p>
         <p>Do not contact contributors directly about support or help with technical issues.</p>
       </div>
       <div class="section" id="credits">
         <h1>
           <a class="toc-backref" href="#id2">Credits</a>
@@ -492,15 +492,15 @@
             </a>
             <a class="reference external" href="https://github.com/feketemihai">
               <img alt="feketemihai" src="https://github.com/feketemihai.png?size=40px"/>
             </a>
           </p>
           <p>
             This module is part of the
-            <a class="reference external" href="https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_account">OCA/l10n-romania</a>
+            <a class="reference external" href="https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_account">OCA/l10n-romania</a>
             project on GitHub.
           </p>
           <p>
             You are welcome to contribute. To learn how please visit
             <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>
             .
           </p>
```

## odoo/addons/l10n_ro_stock_account/tests/__init__.py

```diff
@@ -1,11 +1,15 @@
 from . import common
+from . import common2
 
 from . import test_product
 
 from . import test_retur
 from . import test_purchase
 from . import test_sale
 from . import test_inventory
 
 from . import test_consum
 from . import test_reception_return_not_fifo
+from . import test_svl_vacuum_location
+from . import test_po_sale_landed_cost
+from . import test_po_landed_cost_sale
```

## odoo/addons/l10n_ro_stock_account/tests/common.py

```diff
@@ -76,14 +76,18 @@
 
         cls.env.company.anglo_saxon_accounting = True
         cls.env.company.l10n_ro_accounting = True
         cls.env.company.l10n_ro_stock_acc_price_diff = True
 
         cls.setUpAccounts()
 
+        # Add multi location group to user
+        grp_multi_loc = cls.env.ref("stock.group_stock_multi_locations")
+        cls.env.user.write({"groups_id": [(4, grp_multi_loc.id, 0)]})
+
         stock_journal = cls.env["account.journal"].search(
             [("code", "=", "STJ"), ("company_id", "=", cls.env.company.id)],
             limit=1,
         )
         if not stock_journal:
             stock_journal = cls.env["account.journal"].create(
                 {"name": "Stock Journal", "code": "STJ", "type": "general"}
@@ -157,14 +161,24 @@
                 "categ_id": cls.category_mp.id,
                 "invoice_policy": "delivery",
                 "purchase_method": "receive",
                 "list_price": cls.list_price_p1,
                 "standard_price": cls.price_p1,
             }
         )
+        cls.landed_cost = cls.env["product.product"].create(
+            {
+                "name": "Landed Cost",
+                "type": "service",
+                "purchase_method": "purchase",
+                "invoice_policy": "order",
+                "property_account_expense_id": cls.account_expense.id,
+                "l10n_ro_property_stock_valuation_account_id": cls.account_valuation.id,
+            }
+        )
 
         cls.vendor = cls.env["res.partner"].search(
             [("name", "=", "TEST Vendor")], limit=1
         )
         if not cls.vendor:
             cls.vendor = cls.env["res.partner"].create({"name": "TEST Vendor"})
 
@@ -174,16 +188,16 @@
         if not cls.client:
             cls.client = cls.env["res.partner"].create({"name": "TEST Client"})
 
         cls.diff_p1 = 1
         cls.diff_p2 = -1
 
         # cantitatea din PO
-        cls.qty_po_p1 = 20.0
-        cls.qty_po_p2 = 20.0
+        cls.qty_po_p1 = 10.0
+        cls.qty_po_p2 = 10.0
 
         # cantitata din SO
         cls.qty_so_p1 = 5.0
         cls.qty_so_p2 = 5.0
 
         cls.val_p1_i = round(cls.qty_po_p1 * cls.price_p1, 2)
         cls.val_p2_i = round(cls.qty_po_p2 * cls.price_p2, 2)
@@ -192,18 +206,18 @@
 
         # valoarea descarcari de gestiune
         cls.val_stock_out_so_p1 = round(cls.qty_so_p1 * cls.price_p1, 2)
         cls.val_stock_out_so_p2 = round(cls.qty_so_p2 * cls.price_p2, 2)
 
         # valoarea descarcari de gestiune incluzand si diferentele
         cls.val_stock_out_so_p1_diff = round(
-            cls.qty_so_p1 * (cls.price_p1 + cls.diff_p1), 2
+            cls.val_stock_out_so_p1 + (cls.qty_so_p1 * cls.diff_p1), 2
         )
         cls.val_stock_out_so_p2_diff = round(
-            cls.qty_so_p2 * (cls.price_p2 + cls.diff_p2), 2
+            cls.val_stock_out_so_p2 + (cls.qty_so_p2 * cls.diff_p2), 2
         )
 
         # valoarea vanzarii
         cls.val_so_p1 = round(cls.qty_so_p1 * cls.list_price_p1, 2)
         cls.val_so_p2 = round(cls.qty_so_p2 * cls.list_price_p2, 2)
 
         cls.val_p1_store = cls.qty_po_p1 * cls.list_price_p1
@@ -217,29 +231,41 @@
         cls.adaos_p1 = round(cls.val_p1_store - cls.val_p1_i, 2)
         cls.adaos_p2 = round(cls.val_p2_store - cls.val_p2_i, 2)
 
         cls.adaos_p1_f = round(cls.val_p1_store - cls.val_p1_f, 2)
         cls.adaos_p2_f = round(cls.val_p2_store - cls.val_p2_f, 2)
 
         warehouse = cls.company_data["default_warehouse"]
-        cls.warehouse = warehouse
+
         picking_type_in = warehouse.in_type_id
         location = picking_type_in.default_location_dest_id
-
+        # Locatia trebuie sa fie child la Stock, altfel la livrari
+        # foloseste location Stock implicita
         cls.location_warehouse = location.copy(
-            {"l10n_ro_merchandise_type": "warehouse", "name": "TEST warehouse"}
+            {
+                "l10n_ro_merchandise_type": "warehouse",
+                "name": "TEST warehouse",
+                "location_id": location.id,
+            }
         )
         cls.picking_type_in_warehouse = picking_type_in.copy(
             {
                 "default_location_dest_id": cls.location_warehouse.id,
                 "name": "TEST Receptie in Depozit",
                 "sequence_code": "IN_test",
             }
         )
-
+        picking_type_out = warehouse.out_type_id
+        cls.picking_type_out_warehouse = picking_type_out.copy(
+            {
+                "default_location_src_id": cls.location_warehouse.id,
+                "name": "TEST Livrare in Depozit",
+                "sequence_code": "OUT_test",
+            }
+        )
         picking_type_transfer = warehouse.int_type_id
         cls.picking_type_transfer = picking_type_transfer.copy(
             {
                 "default_location_src_id": cls.location_warehouse.id,
                 "default_location_dest_id": cls.location_warehouse.id,
                 "name": "TEST Transfer",
                 "sequence_code": "TR_test",
@@ -287,14 +313,15 @@
                 po_line.product_qty = self.qty_po_p2
                 po_line.price_unit = self.price_p2
 
             po = po.save()
             po.button_confirm()
         else:
             po = self.po
+
         if validate_picking:
             self.picking = po.picking_ids.filtered(lambda pick: pick.state != "done")
             self.writeOnPicking(vals)
             qty_po_p1 = self.qty_po_p1 if not partial else self.qty_po_p1 / 2
             qty_po_p2 = self.qty_po_p2 if not partial else self.qty_po_p2 / 2
             for move_line in self.picking.move_line_ids:
                 if move_line.product_id == self.product_1:
@@ -310,19 +337,24 @@
         return po
 
     def create_invoice(
         self, diff_p1=0, diff_p2=0, quant_p1=0, quant_p2=0, auto_post=True
     ):
         invoice = Form(
             self.env["account.move"].with_context(
-                default_move_type="in_invoice", default_invoice_date=fields.Date.today()
+                default_move_type="in_invoice",
+                default_invoice_date=fields.Date.today(),
+                active_model="accoun.move",
             )
         )
+        bill_union = self.env["purchase.bill.union"].search(
+            [("purchase_order_id", "=", self.po.id)]
+        )
         invoice.partner_id = self.vendor
-        invoice.purchase_id = self.po
+        invoice.purchase_vendor_bill_id = bill_union
 
         with invoice.invoice_line_ids.edit(0) as line_form:
             line_form.quantity += quant_p1
             line_form.price_unit += diff_p1
         with invoice.invoice_line_ids.edit(1) as line_form:
             line_form.quantity += quant_p2
             line_form.price_unit += diff_p2
@@ -332,17 +364,17 @@
             invoice.action_switch_invoice_into_refund_credit_note()
         if quant_p1 or quant_p2 or diff_p1 or diff_p2:
             invoice = invoice.with_context(l10n_ro_approved_price_difference=True)
         if auto_post:
             invoice.action_post()
 
         self.invoice = invoice
-        _logger.info("Factura introdusa")
+        _logger.debug("Factura introdusa")
 
-    def make_puchase(self):
+    def make_purchase(self):
         self.create_po()
         self.create_invoice()
 
     def make_return(self, pick, quantity=1.0):
 
         stock_return_picking_form = Form(
             self.env["stock.return.picking"].with_context(
@@ -353,50 +385,46 @@
         return_wiz.product_return_moves.write({"quantity": quantity, "to_refund": True})
         res = return_wiz.create_returns()
         return_pick = self.env["stock.picking"].browse(res["res_id"])
 
         # Validate picking
         return_pick.action_confirm()
         return_pick.action_assign()
-        for move_line in return_pick.move_lines:
+        for move_line in return_pick.move_ids:
             if move_line.product_uom_qty > 0 and move_line.quantity_done == 0:
                 move_line.write({"quantity_done": move_line.product_uom_qty})
         return_pick._action_done()
 
     def create_so(self, vals=False):
-        _logger.info("Start sale")
+        _logger.debug("Start sale")
         so = Form(self.env["sale.order"])
         so.partner_id = self.client
 
-        so.warehouse_id = self.warehouse
         with so.order_line.new() as so_line:
             so_line.product_id = self.product_1
             so_line.product_uom_qty = self.qty_so_p1
-            so_line.price_unit = self.list_price_p1
+            # so_line.price_unit = self.p
 
         with so.order_line.new() as so_line:
             so_line.product_id = self.product_2
             so_line.product_uom_qty = self.qty_so_p2
-            so_line.price_unit = self.list_price_p2
 
         self.so = so.save()
         self.so.action_confirm()
-
         self.picking = self.so.picking_ids
         self.writeOnPicking(vals)
         self.picking.action_assign()  # verifica disponibilitate
 
-        for move_line in self.picking.move_lines:
+        for move_line in self.picking.move_ids:
             if move_line.product_uom_qty > 0 and move_line.quantity_done == 0:
                 move_line.write({"quantity_done": move_line.product_uom_qty})
 
-        # self.picking.move_lines.write({'quantity_done': 2})
-        # self.picking.button_validate()
         self.picking._action_done()
-        _logger.info("Livrare facuta")
+        _logger.debug("Livrare facuta")
+        return self.picking
 
     def create_sale_invoice(self, diff_p1=0, diff_p2=0):
         # invoice on order
         invoice = self.so._create_invoices()
 
         invoice = Form(invoice)
 
@@ -405,19 +433,20 @@
         with invoice.invoice_line_ids.edit(1) as line_form:
             line_form.price_unit += diff_p2
 
         invoice = invoice.save()
 
         invoice.action_post()
 
-    def trasfer(self, location, location_dest, product=None):
+    def transfer(
+        self, location, location_dest, product=False, accounting_date=False, post=True
+    ):
 
         self.PickingObj = self.env["stock.picking"]
         self.MoveObj = self.env["stock.move"]
-        self.MoveObj = self.env["stock.move"]
 
         if not product:
             product = self.product_mp
 
         picking = self.PickingObj.create(
             {
                 "picking_type_id": self.picking_type_transfer.id,
@@ -432,39 +461,59 @@
                 "product_uom_qty": 2,
                 "product_uom": product.uom_id.id,
                 "picking_id": picking.id,
                 "location_id": location.id,
                 "location_dest_id": location_dest.id,
             }
         )
+        if accounting_date:
+            picking.l10n_ro_accounting_date = accounting_date
         picking.action_confirm()
         picking.action_assign()
-        for move_line in picking.move_lines:
-            if move_line.product_uom_qty > 0 and move_line.quantity_done == 0:
-                move_line.write({"quantity_done": move_line.product_uom_qty})
-        picking._action_done()
-
-        return picking
+        if post:
+            for move_line in picking.move_ids:
+                if move_line.product_uom_qty > 0 and move_line.quantity_done == 0:
+                    move_line.write({"quantity_done": move_line.product_uom_qty})
+            picking._action_done()
+        self.picking = picking
 
-    def check_stock_valuation(self, val_p1, val_p2):
+    def check_stock_valuation(self, val_p1, val_p2, account=None):
         val_p1 = round(val_p1, 2)
         val_p2 = round(val_p2, 2)
-        domain = [("product_id", "in", [self.product_1.id, self.product_2.id])]
+        if not account:
+            account = self.account_valuation
+
+        domain = [
+            ("product_id", "in", [self.product_1.id, self.product_2.id]),
+            ("l10n_ro_account_id", "=", account.id),
+        ]
         valuations = self.env["stock.valuation.layer"].read_group(
-            domain, ["value:sum", "quantity:sum"], ["product_id"]
+            domain,
+            ["value:sum", "quantity:sum", "remaining_value:sum", "remaining_qty:sum"],
+            ["product_id"],
         )
-
         for valuation in valuations:
             val = round(valuation["value"], 2)
+            rem_val = round(valuation["remaining_value"], 2)
+
             if valuation["product_id"][0] == self.product_1.id:
-                _logger.info("Check stock P1 {} = {}".format(val, val_p1))
+                _logger.debug("Check stock P1 {} = {}".format(val, val_p1))
                 self.assertAlmostEqual(val, val_p1)
+                if self.product_1.cost_method == "fifo":
+                    self.assertAlmostEqual(rem_val, val_p1)
+
             if valuation["product_id"][0] == self.product_2.id:
-                _logger.info("Check stock P2 {} = {}".format(val, val_p2))
+                _logger.debug("Check stock P2 {} = {}".format(val, val_p2))
                 self.assertAlmostEqual(val, val_p2)
+                if self.product_2.cost_method == "fifo":
+                    self.assertAlmostEqual(rem_val, val_p2)
+
+            qty = round(valuation["quantity"], 2)
+            rem_qty = round(valuation["remaining_qty"], 2)
+            self.assertAlmostEqual(qty, rem_qty)
 
     def check_account_valuation(self, val_p1, val_p2, account=None):
         val_p1 = round(val_p1, 2)
         val_p2 = round(val_p2, 2)
         if not account:
             account = self.account_valuation
 
@@ -475,39 +524,92 @@
         ]
         account_valuations = self.env["account.move.line"].read_group(
             domain, ["debit:sum", "credit:sum", "quantity:sum"], ["product_id"]
         )
         for valuation in account_valuations:
             val = round(valuation["debit"] - valuation["credit"], 2)
             if valuation["product_id"][0] == self.product_1.id:
-                _logger.info("Check account P1 {} = {}".format(val, val_p1))
+                _logger.debug("Check account P1 {} = {}".format(val, val_p1))
                 self.assertAlmostEqual(val, val_p1)
             if valuation["product_id"][0] == self.product_2.id:
-                _logger.info("Check account P2 {} = {}".format(val, val_p2))
+                _logger.debug("Check account P2 {} = {}".format(val, val_p2))
                 self.assertAlmostEqual(val, val_p2)
 
-    def show_account_valuation(self, account):
+    def check_account_diff(self, val_p1, val_p2):
+        self.check_account_valuation(val_p1, val_p2, self.account_difference)
+
+    def check_account_valuation_mp(self, val_p1, account=None):
+        val_p1 = round(val_p1, 2)
+        if not account:
+            account = self.account_valuation
+
         domain = [
-            ("product_id", "in", [self.product_1.id, self.product_2.id]),
+            ("product_id", "=", self.product_mp.id),
             ("account_id", "=", account.id),
             ("parent_state", "=", "posted"),
         ]
         account_valuations = self.env["account.move.line"].read_group(
             domain, ["debit:sum", "credit:sum", "quantity:sum"], ["product_id"]
         )
         for valuation in account_valuations:
             val = round(valuation["debit"] - valuation["credit"], 2)
-            if valuation["product_id"][0] == self.product_1.id:
-                _logger.info("Show account P1 {}  ".format(val))
-            if valuation["product_id"][0] == self.product_2.id:
-                _logger.info("Show account P2 {}  ".format(val))
+            if valuation["product_id"][0] == self.product_mp.id:
+                _logger.info("Check account P1 {} = {}".format(val, val_p1))
+                self.assertAlmostEqual(val, val_p1)
 
-        account_valuations = self.env["account.move.line"].search(domain)
-        for line in account_valuations:
-            _logger.info(
-                "move line:  {} {} {}".format(
-                    line.account_id.name, line.debit, line.credit
-                )
-            )
+    def set_stock(self, product, qty, location=None):
+        if not location:
+            location = self.location_warehouse
+        self.env["stock.quant"].with_context(inventory_mode=True).create(
+            {
+                "product_id": product.id,
+                "inventory_quantity": qty,
+                "location_id": location.id,
+            }
+        )
 
-    def check_account_diff(self, val_p1, val_p2):
-        self.check_account_valuation(val_p1, val_p2, self.account_difference)
+    def _get_stock_valuation_move_lines(self):
+        return self.env["account.move.line"].search(
+            [
+                ("account_id", "=", self.account_valuation.id),
+            ],
+            order="date, id",
+        )
+
+    def _get_stock_output_move_lines(self):
+        return self.env["account.move.line"].search(
+            [
+                ("account_id", "=", self.account_expense.id),
+            ],
+            order="date, id",
+        )
+
+    def create_lc(self, picking, lc_p1, lc_p2, vendor_bill=False):
+        default_vals = self.env["stock.landed.cost"].default_get(
+            list(self.env["stock.landed.cost"].fields_get())
+        )
+        default_vals.update(
+            {
+                "picking_ids": [picking.id],
+                "account_journal_id": self.company_data["default_journal_misc"],
+                "cost_lines": [(0, 0, {"product_id": self.product_1.id})],
+                "valuation_adjustment_lines": [],
+                "vendor_bill_id": vendor_bill and vendor_bill.id or False,
+            }
+        )
+        cost_lines_values = {
+            "name": ["equal split"],
+            "split_method": ["equal"],
+            "price_unit": [lc_p1 + lc_p2],
+        }
+        stock_landed_cost_1 = self.env["stock.landed.cost"].new(default_vals)
+        for index, cost_line in enumerate(stock_landed_cost_1.cost_lines):
+            cost_line.onchange_product_id()
+            cost_line.name = cost_lines_values["name"][index]
+            cost_line.split_method = cost_lines_values["split_method"][index]
+            cost_line.price_unit = cost_lines_values["price_unit"][index]
+        vals = stock_landed_cost_1._convert_to_write(stock_landed_cost_1._cache)
+        stock_landed_cost_1 = self.env["stock.landed.cost"].create(vals)
+
+        stock_landed_cost_1.compute_landed_cost()
+        stock_landed_cost_1.button_validate()
+        return stock_landed_cost_1
```

## odoo/addons/l10n_ro_stock_account/tests/test_consum.py

```diff
@@ -10,142 +10,131 @@
 _logger = logging.getLogger(__name__)
 
 
 # Generare note contabile la achizitie
 
 
 @tagged("post_install", "-at_install")
-class TestStockConsumn(TestStockCommon):
-    def set_stock(self, product, qty):
-        inventory_obj = self.env["stock.quant"].with_context(inventory_mode=True)
-        inventory = inventory_obj.create(
-            {
-                "location_id": self.location_warehouse.id,
-                "product_id": product.id,
-                "inventory_quantity": qty,
-            }
-        )
-        inventory._apply_inventory()
-
+class TestStockConsum(TestStockCommon):
     def test_transfer(self):
         # la transferul dintr-o locatie in alta valoarea stocului trebuie
         # sa ramana neschimbata
 
         self.set_stock(self.product_mp, 1000)
         location_id = self.picking_type_transfer.default_location_src_id
         location_dest_id = self.picking_type_transfer.default_location_dest_id
-        _logger.info("Start transfer")
-        picking = self.trasfer(location_id, location_dest_id)
-        _logger.info("Tranfer efectuat")
+        _logger.debug("Start transfer")
+        self.transfer(location_id, location_dest_id)
+        _logger.debug("Tranfer efectuat")
 
-        _logger.info("Start return transfer")
-        self.make_return(picking, 1)
+        _logger.debug("Start return transfer")
+        self.make_return(self.picking, 1)
 
     def test_transfer_in_locatie_evaluata(self):
         # transfer materia prima in marfa
 
         self.set_stock(self.product_mp, 1000)
         location_id = self.picking_type_transfer.default_location_src_id
         location_dest_id = self.picking_type_transfer.default_location_dest_id.copy(
             {"l10n_ro_property_stock_valuation_account_id": self.account_valuation.id}
         )
-        _logger.info("Start transfer")
-        picking = self.trasfer(location_id, location_dest_id)
-        _logger.info("Tranfer efectuat")
+        _logger.debug("Start transfer")
+        self.transfer(location_id, location_dest_id)
+        _logger.debug("Tranfer efectuat")
 
-        _logger.info("Start return transfer")
-        self.make_return(picking, 1)
+        _logger.debug("Start return transfer")
+        self.make_return(self.picking, 1)
 
     def test_transfer_din_locatie_evaluata(self):
         # transfer materia prima in marfa
 
         self.set_stock(self.product_mp, 1000)
         location_id = self.picking_type_transfer.default_location_src_id.copy(
             {"l10n_ro_property_stock_valuation_account_id": self.account_valuation.id}
         )
         location_dest_id = self.picking_type_transfer.default_location_dest_id
 
-        _logger.info("Start transfer")
-        picking = self.trasfer(location_id, location_dest_id)
-        _logger.info("Tranfer efectuat")
+        _logger.debug("Start transfer")
+        self.transfer(location_id, location_dest_id)
+        _logger.debug("Tranfer efectuat")
 
-        _logger.info("Start return transfer")
-        self.make_return(picking, 1)
+        _logger.debug("Start return transfer")
+        self.make_return(self.picking, 1)
 
     def test_production_consumption(self):
         self.set_stock(self.product_mp, 1000)
-        _logger.info("Start Consum in productie")
+        _logger.debug("Start Consum in productie")
         location_id = self.picking_type_transfer.default_location_src_id
 
-        picking = self.trasfer(location_id, self.location_production)
-        _logger.info("Consum in productie facut")
+        self.transfer(location_id, self.location_production)
+        _logger.debug("Consum in productie facut")
 
-        _logger.info("Start retur  consum")
-        self.make_return(picking, 1)
+        _logger.debug("Start retur  consum")
+        self.make_return(self.picking, 1)
 
     def test_consumption_din_locatie_evaluata(self):
         self.set_stock(self.product_mp, 1000)
-        _logger.info("Start Consum in productie din locatie cu alta evaluare")
+        _logger.debug("Start Consum in productie din locatie cu alta evaluare")
         location_id = self.picking_type_transfer.default_location_src_id.copy(
             {
                 "l10n_ro_property_stock_valuation_account_id": self.account_valuation_mp.id,
                 "l10n_ro_property_account_expense_location_id": self.account_expense_mp.id,
             }
         )
 
-        picking = self.trasfer(location_id, self.location_production)
-        _logger.info("Consum in productie facut")
+        self.transfer(location_id, self.location_production)
+        _logger.debug("Consum in productie facut")
 
-        _logger.info("Start retur  consum")
-        self.make_return(picking, 1)
+        _logger.debug("Start retur  consum")
+        self.make_return(self.picking, 1)
 
     def test_production(self):
         self.set_stock(self.product_mp, 1000)
-        _logger.info("Start receptie din productie")
+        _logger.debug("Start receptie din productie")
 
         location_dest_id = self.picking_type_transfer.default_location_dest_id
-        picking = self.trasfer(self.location_production, location_dest_id)
-        _logger.info("Receptie  din productie facuta")
+        self.transfer(self.location_production, location_dest_id)
+        _logger.debug("Receptie  din productie facuta")
 
-        _logger.info("Start retur  in productie")
-        self.make_return(picking, 1)
+        _logger.debug("Start retur  in productie")
+        self.make_return(self.picking, 1)
 
     def test_usage_giving(self):
 
         self.set_stock(self.product_mp, 1000)
-        _logger.info("Start dare in folosinta")
+        _logger.debug("Start dare in folosinta")
 
         location_id = self.picking_type_transfer.default_location_src_id
 
         location_dest_id = self.picking_type_transfer.default_location_dest_id.copy(
             {"usage": "usage_giving"}
         )
 
-        picking = self.trasfer(location_id, location_dest_id)
-        _logger.info("Dare in folosinta facuta")
+        self.transfer(location_id, location_dest_id)
+        _logger.debug("Dare in folosinta facuta")
 
-        _logger.info("Start retur dare in folosinta")
-        self.make_return(picking, 1)
+        _logger.debug("Start retur dare in folosinta")
+        self.make_return(self.picking, 1)
 
     def test_consume(self):
 
         self.set_stock(self.product_mp, 1000)
-        _logger.info("Start consum produse")
+        _logger.debug("Start consum produse")
 
         location_id = self.picking_type_transfer.default_location_src_id
 
         location_dest_id = self.picking_type_transfer.default_location_dest_id.copy(
             {"usage": "consume"}
         )
 
-        picking = self.trasfer(location_id, location_dest_id)
-        _logger.info("Consum facuta")
+        self.transfer(location_id, location_dest_id)
+        _logger.debug("Consum facuta")
 
-        _logger.info("Start retur consum")
-        self.make_return(picking, 1)
+        _logger.debug("Start retur consum")
+        self.make_return(self.picking, 1)
 
     def test_consume_extra_accounts(self):
         acc_3028 = self.env["account.account"].search(
             [("code", "=", "302800")], limit=1
         )
         acc_6028 = self.env["account.account"].search(
             [("code", "=", "602800")], limit=1
@@ -162,24 +151,24 @@
         self.check_account_valuation(0, 0, acc_6028)
 
         _logger.info("Start consum produse")
         location_id = self.picking_type_transfer.default_location_src_id
         location_dest_id = self.picking_type_transfer.default_location_dest_id.copy(
             {"usage": "consume"}
         )
-        picking = self.trasfer(location_id, location_dest_id)
+        self.transfer(location_id, location_dest_id)
         _logger.info("Consum facuta")
 
         self.check_stock_valuation(val_stock_p1 / 2, 0)
         self.check_account_valuation(val_stock_p1 / 2, 0, self.account_valuation_mp)
         self.check_account_valuation(0, 0, acc_3028)
         self.check_account_valuation(val_stock_p1 / 2, 0, acc_6028)
 
         _logger.info("Start retur consum")
-        self.make_return(picking, 1)
+        self.make_return(self.picking, 1)
         self.check_stock_valuation(val_stock_p1, 0)
         self.check_account_valuation(val_stock_p1, 0, self.account_valuation_mp)
         self.check_account_valuation(0, 0, acc_3028)
         self.check_account_valuation(0, 0, acc_6028)
 
     def test_usage_giving_extra_accounts(self):
         acc_3028 = self.env["account.account"].search(
@@ -200,21 +189,58 @@
         self.check_account_valuation(0, 0, acc_6028)
 
         _logger.info("Start dare in folosinta")
         location_id = self.picking_type_transfer.default_location_src_id
         location_dest_id = self.picking_type_transfer.default_location_dest_id.copy(
             {"usage": "usage_giving"}
         )
-        picking = self.trasfer(location_id, location_dest_id)
+        self.transfer(location_id, location_dest_id)
         _logger.info("Dare in folosinta facuta")
 
         self.check_stock_valuation(val_stock_p1 / 2, 0)
         self.check_account_valuation(val_stock_p1 / 2, 0)
         self.check_account_valuation(0, 0, acc_3028)
         self.check_account_valuation(val_stock_p1 / 2, 0, acc_6028)
 
         _logger.info("Start retur dare in folosinta")
-        self.make_return(picking, 1)
+        self.make_return(self.picking, 1)
         self.check_stock_valuation(val_stock_p1, 0)
         self.check_account_valuation(val_stock_p1, 0)
         self.check_account_valuation(0, 0, acc_3028)
         self.check_account_valuation(0, 0, acc_6028)
+
+    def test_consume_extra_location_accounts(self):
+        acc_3026 = self.env["account.account"].search(
+            [("code", "=", "302600")], limit=1
+        )
+        acc_6026 = self.env["account.account"].search(
+            [("code", "=", "602600")], limit=1
+        )
+        acc_707 = self.env["account.account"].search([("code", "=", "707000")], limit=1)
+        _logger.info(
+            "Start consum produse cand conturile de pe categorie difera de cele de pe locatie"
+        )
+        self.product_mp.standard_price = self.price_p1
+        self.product_mp.categ_id.write({"l10n_ro_stock_account_change": True})
+        val_stock_p1 = 1 * round(4 * self.price_p1, 2)
+
+        self.set_stock(self.product_mp, 4)
+        self.check_account_valuation_mp(val_stock_p1, self.account_valuation_mp)
+        self.check_stock_valuation(val_stock_p1, 0)
+
+        _logger.info("Start consum produse")
+        location_id = self.picking_type_transfer.default_location_src_id
+        location_id.write(
+            {
+                "l10n_ro_property_account_income_location_id": acc_707,
+                "l10n_ro_property_account_expense_location_id": acc_6026,
+                "l10n_ro_property_stock_valuation_account_id": acc_3026,
+            }
+        )
+        location_dest_id = self.picking_type_transfer.default_location_dest_id.copy(
+            {"usage": "consume"}
+        )
+
+        self.transfer(location_id, location_dest_id, self.product_mp)
+        _logger.info("Consum facut")
+        self.check_account_valuation_mp(-val_stock_p1 / 2, acc_3026)
+        self.check_account_valuation_mp(val_stock_p1 / 2, acc_6026)
```

## odoo/addons/l10n_ro_stock_account/tests/test_inventory.py

```diff
@@ -7,17 +7,17 @@
 
 from .common import TestStockCommon
 
 _logger = logging.getLogger(__name__)
 
 
 @tagged("post_install", "-at_install")
-class TestStockSale(TestStockCommon):
+class TestStockInventory(TestStockCommon):
     def _plus_inventory(self):
-        self.make_puchase()
+        self.make_purchase()
 
         inventory_obj = self.env["stock.quant"].with_context(inventory_mode=True)
         inventory = inventory_obj.create(
             {
                 "location_id": self.location_warehouse.id,
                 "product_id": self.product_1.id,
                 "inventory_quantity": self.qty_po_p1 + 10,
@@ -33,15 +33,15 @@
         self.check_account_valuation(val_stock_p1, val_stock_p2)
 
     def test_plus_inventory_location_valuation(self):
         self.set_warehouse_as_mp()
         self._plus_inventory()
 
     def _minus_inventory(self):
-        self.make_puchase()
+        self.make_purchase()
 
         inventory_obj = self.env["stock.quant"].with_context(inventory_mode=True)
         inventory = inventory_obj.create(
             {
                 "location_id": self.location_warehouse.id,
                 "product_id": self.product_1.id,
                 "inventory_quantity": self.qty_po_p1 - 10,
```

## odoo/addons/l10n_ro_stock_account/tests/test_product.py

```diff
@@ -7,15 +7,15 @@
 
 from .common import TestStockCommon
 
 _logger = logging.getLogger(__name__)
 
 
 @tagged("post_install", "-at_install")
-class TestStockSale(TestStockCommon):
+class TestProductCategory(TestStockCommon):
     def test_product_category(self):
 
         category = Form(self.category.copy())
         category.property_stock_valuation_account_id = self.account_valuation_mp
 
         category = category.save()
```

## odoo/addons/l10n_ro_stock_account/tests/test_purchase.py

```diff
@@ -84,7 +84,42 @@
 
         self.check_account_valuation(
             self.val_p1_i, self.val_p2_i, self.account_valuation_mp
         )
 
         # verificare inregistrare diferenta de pret
         self.check_account_diff(0, 0)
+
+    def test_two_nirs_average(self):
+        self.product_1.product_tmpl_id.categ_id.property_cost_method = "average"
+        self.product_2.product_tmpl_id.categ_id.property_cost_method = "average"
+        self.create_po()
+
+        self.price_p1 = 60.0
+        self.create_po()
+
+        self.assertEqual(self.product_1.standard_price, 55)
+        self.assertEqual(self.product_2.standard_price, 50)
+
+    def test_nir_with_account_mp(self):
+        self.product_1.product_tmpl_id.categ_id = self.category_mp
+        self.product_2.product_tmpl_id.categ_id = self.category_mp
+
+        self.create_po()
+
+        self.check_stock_valuation(
+            self.val_p1_i, self.val_p2_i, self.account_valuation_mp
+        )
+
+        self.check_account_valuation(0, 0, self.account_valuation_mp)
+
+        self.create_invoice()
+
+        self.check_stock_valuation(
+            self.val_p1_i, self.val_p2_i, self.account_valuation_mp
+        )
+
+        self.check_account_valuation(
+            self.val_p1_i, self.val_p2_i, self.account_valuation_mp
+        )
+
+        self.check_account_diff(0, 0)
```

## odoo/addons/l10n_ro_stock_account/tests/test_reception_return_not_fifo.py

```diff
@@ -12,30 +12,37 @@
 
 
 @tagged("post_install", "-at_install")
 class TestStockPurchaseReturn(TestStockCommon):
     def test_not_fifo_return(self):
         po1 = self.create_po()
         self.create_invoice()
-        _logger.info("PO1: %s" % po1.amount_total)
-        _logger.info("Product1 price: %s" % self.product_1.standard_price)
+        _logger.debug("PO1: %s" % po1.amount_total)
+        _logger.debug("Product1 price: %s" % self.product_1.standard_price)
 
         stock_value_p1 = round(self.qty_po_p1 * self.price_p1, 2)
         stock_value_p2 = round(self.qty_po_p2 * self.price_p2, 2)
+
         self.check_stock_valuation(stock_value_p1, stock_value_p2)
+        self.check_account_valuation(stock_value_p1, stock_value_p2)
 
         self.price_p1 = 55.0
+        self.price_p2 = 55.0
         po2 = self.create_po()
         self.create_invoice()
-        _logger.info("PO2: %s" % po2.amount_total)
-        _logger.info("Product1 price: %s" % self.product_1.standard_price)
+        _logger.debug("PO2: %s" % po2.amount_total)
+        _logger.debug("Product1 price: %s" % self.product_1.standard_price)
 
         stock_value_final_p1 = stock_value_p1 + round(self.qty_po_p1 * self.price_p1, 2)
         stock_value_final_p2 = stock_value_p2 + round(self.qty_po_p2 * self.price_p2, 2)
         self.check_stock_valuation(stock_value_final_p1, stock_value_final_p2)
-
+        self.check_account_valuation(stock_value_final_p1, stock_value_final_p2)
         pick = po2.picking_ids
         self.make_return(pick, 2)
 
         stock_value_final_p1 = stock_value_final_p1 - round(2 * self.price_p1, 2)
         stock_value_final_p2 = stock_value_final_p2 - round(2 * self.price_p2, 2)
         self.check_stock_valuation(stock_value_final_p1, stock_value_final_p2)
+
+        self.create_invoice()
+        self.check_stock_valuation(stock_value_final_p1, stock_value_final_p2)
+        self.check_account_valuation(stock_value_final_p1, stock_value_final_p2)
```

## odoo/addons/l10n_ro_stock_account/tests/test_sale.py

```diff
@@ -17,20 +17,22 @@
         """
         Vanzare si facturare
              - initial in stoc si contabilitate este valoarea din achizitie
              - dupa vanzare valoarea stocului trebuie sa scada cu valoarea stocului
              vandut
              - valoarea din stoc trebuie sa fie egala cu valoarea din contabilitate
              - in contul de venituri trebuie sa fie inregistrata valoarea de vanzare
+        Fara l10n_ro_accounting descarcarea de gestiune se face pe factura,
+        anglo-saxon standard
         """
 
         self.env.company.l10n_ro_accounting = False
 
         #  intrare in stoc
-        self.make_puchase()
+        self.make_purchase()
 
         self.check_stock_valuation(self.val_p1_i, self.val_p2_i)
         self.check_account_valuation(self.val_p1_i, self.val_p2_i)
 
         # iesire din stoc prin vanzare
         self.create_so()
 
@@ -38,19 +40,19 @@
         val_stock_p1 = round(self.val_p1_i - self.val_stock_out_so_p1, 2)
         val_stock_p2 = round(self.val_p2_i - self.val_stock_out_so_p2, 2)
 
         self.check_stock_valuation(val_stock_p1, val_stock_p2)
 
         self.create_sale_invoice()
 
-        _logger.info("Verifcare valoare ramas in stoc")
+        _logger.debug("Verifcare valoare ramas in stoc")
         self.check_stock_valuation(val_stock_p1, val_stock_p2)
         self.check_account_valuation(val_stock_p1, val_stock_p2)
 
-        _logger.info("Verifcare valoare vanduta")
+        _logger.debug("Verifcare valoare vanduta")
         self.check_account_valuation(
             -self.val_so_p1, -self.val_so_p2, self.account_income
         )
 
     def test_sale_and_invoice(self):
         """
         Vanzare si facturare
@@ -58,15 +60,15 @@
              - dupa vanzare valoarea stocului trebuie sa scada cu valoarea stocului
              vandut
              - valoarea din stoc trebuie sa fie egala cu valoarea din contabilitate
              - in contul de venituri trebuie sa fie inregistrata valoarea de vanzare
         """
 
         #  intrare in stoc
-        self.make_puchase()
+        self.make_purchase()
 
         self.check_stock_valuation(self.val_p1_i, self.val_p2_i)
         self.check_account_valuation(self.val_p1_i, self.val_p2_i)
 
         # iesire din stoc prin vanzare
         self.create_so()
 
@@ -75,34 +77,34 @@
         val_stock_p2 = round(self.val_p2_i - self.val_stock_out_so_p2, 2)
 
         self.check_stock_valuation(val_stock_p1, val_stock_p2)
         self.check_account_valuation(val_stock_p1, val_stock_p2)
 
         self.create_sale_invoice()
 
-        _logger.info("Verifcare valoare ramas in stoc")
+        _logger.debug("Verifcare valoare ramas in stoc")
         self.check_stock_valuation(val_stock_p1, val_stock_p2)
         self.check_account_valuation(val_stock_p1, val_stock_p2)
 
-        _logger.info("Verifcare valoare vanduta")
+        _logger.debug("Verifcare valoare vanduta")
         self.check_account_valuation(
             -self.val_so_p1, -self.val_so_p2, self.account_income
         )
 
     def test_sale_and_invoice_and_retur(self):
         """
         Vanzare si facturare
          - initial in stoc si contabilitate este valoarea din achizitie
          - dupa vanzare valoarea stocului trebuie sa scada cu valoarea stocului vandut
          - valoarea din stoc trebuie sa fie egala cu valoarea din contabilitate
          - in contul de venituri trebuie sa fie inregistrata valoarea de vanzare
         """
 
         #  intrare in stoc
-        self.make_puchase()
+        self.make_purchase()
 
         # iesire din stoc prin vanzare
         self.create_so()
         pick = self.so.picking_ids
 
         stock_return_picking_form = Form(
             self.env["stock.return.picking"].with_context(
@@ -118,7 +120,43 @@
 
         # Validate picking
         return_pick.move_line_ids.write({"qty_done": 2})
 
         return_pick.button_validate()
 
         self.create_sale_invoice()
+
+    def test_sale_average(self):
+        self.product_1.product_tmpl_id.categ_id.property_cost_method = "average"
+        self.product_2.product_tmpl_id.categ_id.property_cost_method = "average"
+
+        # price p1 = 50, qty p1 = 10
+        self.create_po()
+
+        self.price_p1 = 60.0
+        self.price_p2 = 60.0
+        self.create_po()
+
+        self.assertEqual(self.product_1.standard_price, 55)
+        self.assertEqual(self.product_2.standard_price, 55)
+
+        self.qty_so_p1 = 1.0
+        self.create_so()
+
+        # valoarea de stoc dupa vanzarea produselor
+        val_stock_p1 = round(self.qty_po_p1 * 50 + self.qty_po_p1 * 60 - 1 * 55, 2)
+        val_stock_p2 = round(
+            self.qty_po_p2 * 50 + self.qty_po_p2 * 60 - self.qty_so_p2 * 55, 2
+        )
+
+        self.check_stock_valuation(val_stock_p1, val_stock_p2)
+        self.check_account_valuation(-1 * 55, -self.qty_so_p2 * 55)
+
+        # vanzare restul => stock = 0
+        self.qty_so_p1 = 19
+        self.qty_so_p2 = 15
+        self.create_so()
+
+        self.check_stock_valuation(0.0, 0.0)
+        self.check_account_valuation(
+            -1 * 2 * self.qty_po_p1 * 55, -1 * 2 * self.qty_po_p2 * 55
+        )
```

## odoo/addons/l10n_ro_stock_account/views/stock_picking_view.xml

### odoo/addons/l10n_ro_stock_account/views/stock_picking_view.xml

```diff
@@ -6,10 +6,26 @@
     <field name="inherit_id" ref="stock.view_picking_form"/>
     <field name="arch" type="xml">
       <xpath expr="//button[@name='action_show_details']" position="after">
         <field name="is_l10n_ro_record" invisible="1"/>
         <field name="picking_code" invisible="1"/>
         <field name="price_unit" attrs="{'invisible': ['|', ('picking_code','!=','incoming'), ('is_l10n_ro_record', '=', False)]}"/>
       </xpath>
+      <xpath expr="//div[@name='button_box']" position="inside">
+        <field name="is_l10n_ro_record" invisible="1"/>
+        <button string="Journal Items" type="object" name="action_l10n_ro_view_account_moves" class="oe_stat_button" icon="fa-dollar" groups="base.group_no_one" attrs="{'invisible': ['|', ('state', 'not in', ['done']), ('is_l10n_ro_record', '=', False)]}"/>
+      </xpath>
+    </field>
+  </record>
+  <record id="l10n_ro_stock_account_move_action" model="ir.actions.act_window">
+    <field name="name">Journal Entries</field>
+    <field name="type">ir.actions.act_window</field>
+    <field name="res_model">account.move.line</field>
+    <field name="view_mode">tree,form</field>
+    <field name="view_id" ref="account.view_move_line_tree"/>
+    <field name="context">{'search_default_group_by_account': 1}</field>
+    <field name="help" type="html">
+      <p class="o_view_nocontent_smiling_face"/>
+      <p/>
     </field>
   </record>
 </odoo>
```

## odoo/addons/l10n_ro_stock_account/views/stock_valuation_layer_views.xml

### odoo/addons/l10n_ro_stock_account/views/stock_valuation_layer_views.xml

```diff
@@ -4,16 +4,46 @@
     <field name="name">stock.valuation.layer.form</field>
     <field name="model">stock.valuation.layer</field>
     <field name="inherit_id" ref="stock_account.stock_valuation_layer_form"/>
     <field name="arch" type="xml">
       <xpath expr="//field[@name='stock_move_id']" position="after">
         <field name="is_l10n_ro_record" invisible="1"/>
         <field name="l10n_ro_valued_type" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}"/>
+        <field name="l10n_ro_stock_move_line_id" attrs="{'invisible': ['|', ('is_l10n_ro_record', '=', False), ('l10n_ro_stock_move_line_id', '=', False)]}"/>
+        <field name="l10n_ro_location_id" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}"/>
+        <field name="l10n_ro_location_dest_id" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}"/>
+        <field name="l10n_ro_lot_ids" widget="many2many_tags" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}"/>
       </xpath>
       <xpath expr="//field[@name='account_move_id']" position="after">
         <field name="l10n_ro_account_id" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}"/>
         <field name="l10n_ro_invoice_line_id" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}"/>
         <field name="l10n_ro_invoice_id" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}"/>
       </xpath>
+      <xpath expr="//page[@name='other_info']" position="after">
+        <page string="Source SVL" name="source_svl" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}">
+          <label for="l10n_ro_svl_src_ids"/>
+          <field name="l10n_ro_svl_src_ids" readonly="1">
+            <tree>
+              <field name="create_date"/>
+              <field name="l10n_ro_valued_type"/>
+              <field name="quantity" sum="Total Quantity"/>
+              <field name="unit_cost"/>
+              <field name="value" sum="Total Value"/>
+            </tree>
+          </field>
+        </page>
+        <page string="Destination SVL" name="destination_svl" attrs="{'invisible': [('is_l10n_ro_record', '=', False)]}">
+          <label for="l10n_ro_svl_dest_ids"/>
+          <field name="l10n_ro_svl_dest_ids" readonly="1">
+            <tree>
+              <field name="create_date"/>
+              <field name="l10n_ro_valued_type"/>
+              <field name="quantity" sum="Total Quantity"/>
+              <field name="unit_cost"/>
+              <field name="value" sum="Total Value"/>
+            </tree>
+          </field>
+        </page>
+      </xpath>
     </field>
   </record>
 </odoo>
```

## odoo/addons/l10n_ro_stock_account/wizard/__init__.py

```diff
@@ -1 +1,2 @@
 from . import stock_picking_return
+from . import stock_valuation_layer_revaluation
```

## odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return.py

```diff
@@ -2,24 +2,33 @@
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 from odoo import api, fields, models
 
 
 class StockReturnPickingLine(models.TransientModel):
     _inherit = "stock.return.picking.line"
 
-    origin_ret_move_qty_check = fields.Boolean(compute="_compute_origin_ret_move_qty")
-    origin_ret_move_qty = fields.Float(compute="_compute_origin_ret_move_qty")
+    l10n_ro_origin_ret_move_qty_warn = fields.Boolean(
+        compute="_compute_l10n_ro_origin_ret_move_qty"
+    )
+    l10n_ro_origin_ret_move_qty = fields.Float(
+        compute="_compute_l10n_ro_origin_ret_move_qty"
+    )
 
     @api.depends("quantity")
-    def _compute_origin_ret_move_qty(self):
+    def _compute_l10n_ro_origin_ret_move_qty(self):
         for line in self:
             mv = line.move_id.sudo()
-            if mv.stock_valuation_layer_ids:
-                vls = mv.stock_valuation_layer_ids.filtered(
+            if (
+                mv.is_l10n_ro_record
+                and mv.product_id.cost_method in ("average", "fifo")
+                and mv._is_in()
+                and mv.stock_valuation_layer_ids
+            ):
+                svls = mv.stock_valuation_layer_ids.filtered(
                     lambda sv: sv.remaining_qty > 0
                 )
-                mv_rem_qty = sum(vls.mapped("remaining_qty"))
-                line.origin_ret_move_qty = mv_rem_qty
-                line.origin_ret_move_qty_check = mv_rem_qty >= line.quantity
+                mv_rem_qty = sum(svls.mapped("remaining_qty"))
+                line.l10n_ro_origin_ret_move_qty = mv_rem_qty
+                line.l10n_ro_origin_ret_move_qty_warn = mv_rem_qty < line.quantity
             else:
-                line.origin_ret_move_qty = line.quantity
-                line.origin_ret_move_qty_check = True
+                line.l10n_ro_origin_ret_move_qty = line.quantity
+                line.l10n_ro_origin_ret_move_qty_warn = False
```

## odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return_views.xml

### odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return_views.xml

```diff
@@ -2,14 +2,14 @@
 <odoo>
   <record id="view_stock_return_picking_form" model="ir.ui.view">
     <field name="name">Return lines</field>
     <field name="model">stock.return.picking</field>
     <field name="inherit_id" ref="stock.view_stock_return_picking_form"/>
     <field name="arch" type="xml">
       <xpath expr="//field[@name='product_return_moves']/tree/field[@name='quantity']" position="after">
-        <field name="origin_ret_move_qty_check" invisible="1"/>
-        <button readonly="True" width="2" style="color: red; position: relative; left: -6px;" string="Quantity more than existing. You will return different stock valuations." icon="fa-exclamation-triangle" attrs="{'invisible': [('origin_ret_move_qty_check', '=', True)]}"/>
-        <field name="origin_ret_move_qty" attrs="{'invisible': [('origin_ret_move_qty_check', '=', True)]}" string="Remaining Qty" style="color: red;"/>
+        <field name="l10n_ro_origin_ret_move_qty_warn" invisible="1"/>
+        <button readonly="True" width="2" style="color: red; position: relative; left: -6px;" string="Quantity more than existing. You will return different stock valuations." icon="fa-exclamation-triangle" attrs="{'invisible': [('l10n_ro_origin_ret_move_qty_warn', '=', False)]}"/>
+        <field name="l10n_ro_origin_ret_move_qty" attrs="{'invisible': [('l10n_ro_origin_ret_move_qty_warn', '=', False)]}" string="Remaining Qty" style="color: red;"/>
       </xpath>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo/addons/l10n_ro_stock_account/models/account_invoice.py` & `odoo/addons/l10n_ro_stock_account/models/account_move.py`

 * *Files 23% similar despite different names*

```diff
@@ -10,18 +10,40 @@
 _logger = logging.getLogger(__name__)
 
 
 class AccountMove(models.Model):
     _name = "account.move"
     _inherit = ["account.move", "l10n.ro.mixin"]
 
-    @api.model_create_multi
-    def create(self, vals_list):
-        vals_list = [value for value in vals_list if value != []]
-        return super(AccountMove, self).create(vals_list)
+    def button_create_landed_costs(self):
+        """Update account of the landed cost ine with the one from invoice line."""
+
+        res = super().button_create_landed_costs()
+        landed_cost = self.env["stock.landed.cost"].browse(res.get("res_id"))
+        if self.is_l10n_ro_record and landed_cost:
+            picking_invoice_ids = (
+                self.line_ids.mapped("purchase_line_id")
+                .mapped("order_id")
+                .mapped("picking_ids")
+            )
+            picking_landed_cost_ids = (
+                self.env["stock.landed.cost"]
+                .search([("state", "=", "done")])
+                .mapped("picking_ids")
+            )
+            landed_cost.picking_ids = picking_invoice_ids.filtered(
+                lambda l: l not in picking_landed_cost_ids and l.state == "done"
+            )
+            for line in landed_cost.cost_lines:
+                invoice_line = self.line_ids.filtered(
+                    lambda l: l.product_id == line.product_id
+                )
+                if invoice_line:
+                    line.account_id = invoice_line[0].account_id
+        return res
 
     def _stock_account_prepare_anglo_saxon_out_lines_vals(self):
         # nu se mai face descarcarea de gestiune la facturare
         invoices = self
         for move in self:
             if move.is_l10n_ro_record:
                 invoices -= move
@@ -55,14 +77,29 @@
         return res
 
 
 class AccountMoveLine(models.Model):
     _name = "account.move.line"
     _inherit = ["account.move.line", "l10n.ro.mixin"]
 
+    @api.onchange("is_landed_costs_line")
+    def _onchange_is_landed_costs_line(self):
+        res = super()._onchange_is_landed_costs_line()
+        if (
+            self.move_id.is_l10n_ro_record
+            and self.product_type == "service"
+            and self.is_landed_costs_line
+        ):
+            accounts = self.product_id.product_tmpl_id._get_product_accounts()
+            if self.move_id.move_type not in ("out_invoice", "out_refund"):
+                self.account_id = accounts["expense"]
+            else:
+                self.account_id = accounts["income"]
+        return res
+
     def _l10n_ro_get_valuation_stock_moves(self):
         valuation_stock_moves = False
         if self.purchase_line_id or self.sale_line_ids:
             domain = [
                 ("state", "=", "done"),
                 ("product_qty", "!=", 0.0),
             ]
@@ -107,8 +144,8 @@
 
     def _get_account_change_stock_moves_purchase(self):
         stock_moves = self.purchase_line_id.move_ids
         return stock_moves.filtered(lambda m: m.state == "done")
 
     def _get_account_change_stock_moves_sale(self):
         sales = self.sale_line_ids.filtered(lambda s: s.move_ids)
-        return sales.move_ids.filtered(lambda m: m.state == "done")
+        return sales.move_ids
```

## Comparing `odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/METADATA` & `odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/METADATA`

 * *Files 6% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 Metadata-Version: 2.1
 Name: odoo-addon-l10n-ro-stock-account
-Version: 15.0.3.9.0
+Version: 16.0.1.1.0
 Summary: Romania - Stock Accounting
 Home-page: https://github.com/OCA/l10n-romania
 Author: NextERP Romania,Dorin Hongu,Forest and Biomass Romania,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Classifier: Development Status :: 6 - Mature
-Requires-Python: >=3.8
-Requires-Dist: odoo-addon-l10n-ro-config (<15.1dev,>=15.0dev)
-Requires-Dist: odoo-addon-l10n-ro-stock (<15.1dev,>=15.0dev)
-Requires-Dist: odoo (<15.1dev,>=15.0a)
+Requires-Python: >=3.10
+Requires-Dist: odoo-addon-l10n-ro-config (<16.1dev,>=16.0dev)
+Requires-Dist: odoo-addon-l10n-ro-stock (<16.1dev,>=16.0dev)
+Requires-Dist: odoo (<16.1dev,>=16.0a)
 
 ==========================
 Romania - Stock Accounting
 ==========================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
@@ -29,21 +29,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Mature-brightgreen.png
     :target: https://odoo-community.org/page/development-status
     :alt: Mature
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--romania-lightgray.png?logo=github
-    :target: https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_account
+    :target: https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_account
     :alt: OCA/l10n-romania
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/l10n-romania-15-0/l10n-romania-15-0-l10n_ro_stock_account
+    :target: https://translation.odoo-community.org/projects/l10n-romania-16-0/l10n-romania-16-0-l10n_ro_stock_account
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/177/15.0
+    :target: https://runbot.odoo-community.org/runbot/177/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 Stock accounting for receptions, deliveries, consume, usage_giving, inventory and  production.
 
 **Table of contents**
@@ -53,15 +53,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-romania/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_account%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_account%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -107,12 +107,12 @@
     :target: https://github.com/feketemihai
     :alt: feketemihai
 
 Current `maintainers <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-dhongu| |maintainer-feketemihai| 
 
-This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_account>`_ project on GitHub.
+This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_account>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/RECORD` & `odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,45 +1,55 @@
-odoo/addons/l10n_ro_stock_account/README.rst,sha256=JEWtDR3wMwSrmH7XAaLt8I-hoEbXf2I6KzD3lasz8Ys,3436
+odoo/addons/l10n_ro_stock_account/README.rst,sha256=VaVE274MyzphetZRCuPHVsMLWyolDgBHyPQwT87Jb8s,3436
 odoo/addons/l10n_ro_stock_account/__init__.py,sha256=PacuDFh1zPYOcR8_TpqCbSm2lburCBebCib46Rga4LY,79
-odoo/addons/l10n_ro_stock_account/__manifest__.py,sha256=MSB1ghgOewecmzt0l54uHeapwrI1K7C2n25atYQnbeo,1096
-odoo/addons/l10n_ro_stock_account/init_hook.py,sha256=CmwrO57EbNJcsY073SthcfaefW3qu1Gq3v36LtRuWyg,8682
-odoo/addons/l10n_ro_stock_account/i18n/l10n_ro_stock_account.pot,sha256=jhUJagtuAzBOsaScHyz--43LHF7R1xqi5nFN3GRD2Dc,9577
-odoo/addons/l10n_ro_stock_account/i18n/ro.po,sha256=nLZ9PjVLckfLmrrIfVg8nFLKBv0Yw6AbmpVcCwPyiDM,10543
-odoo/addons/l10n_ro_stock_account/migrations/15.0.1.6.1/post-migration.py,sha256=55A-K7dOTrv0Sw91NN_iTCyM31tDO2PCW0TN16uKEI4,887
-odoo/addons/l10n_ro_stock_account/migrations/15.0.1.6.1/pre-migration.py,sha256=IE4FZob9HOSZGZ1865cnV7FSJ9Oc209uVyFd4uBiBjg,3569
-odoo/addons/l10n_ro_stock_account/models/__init__.py,sha256=0yoDiloCjSDTqIbG5p27dFHvUFJDAjvrwtvpmZLwXcE,258
+odoo/addons/l10n_ro_stock_account/__manifest__.py,sha256=9VkCmWj3iEXc3XzKDGg1UYebPFQY_j6L4tLhPwFbT-0,1198
+odoo/addons/l10n_ro_stock_account/init_hook.py,sha256=ALTW5wQKBLJr82YYMpSgX51t2N5fb_RTWttPNOEdKt8,12467
+odoo/addons/l10n_ro_stock_account/i18n/l10n_ro_stock_account.pot,sha256=KzaIGpe9QU0C_Y7FCo8Pj8LrAEmmrjronWfuocMgyBg,16065
+odoo/addons/l10n_ro_stock_account/i18n/ro.po,sha256=l_4C1Z25hkeyX0y93O31SJ6KSGhHbwali3mJZYFIsGI,17030
+odoo/addons/l10n_ro_stock_account/models/__init__.py,sha256=GV7G2YF21G_xjW7QmrViek6VP-bpFPv8FXB5EFvzoFQ,434
 odoo/addons/l10n_ro_stock_account/models/account_account.py,sha256=VWfu4nKGYWPIdk-N-Sf-mNJwdGNdLCrkTLMHSp5V_MA,588
-odoo/addons/l10n_ro_stock_account/models/account_invoice.py,sha256=0YTOmBrx-uCv9lWol0n_NPayjVbTPVxT1kN2COFE5gM,4602
-odoo/addons/l10n_ro_stock_account/models/product.py,sha256=VXLjUmajWrq_x4dVouVU2e10qRuZsI3fJxLRhYCwg64,9631
+odoo/addons/l10n_ro_stock_account/models/account_move.py,sha256=G6W90kcfGyT9-jGKvjXNCq99UflXwI63iip2COaYftw,6119
+odoo/addons/l10n_ro_stock_account/models/l10n_ro_stock_valuation_layer_tracking.py,sha256=uCieonqwP4C2kEM0I2M7il96Y_vstmXzUn4W0zc9cuo,419
+odoo/addons/l10n_ro_stock_account/models/product_category.py,sha256=96rcY4AMPHB4lax0iXsxgbCo9Yifrp0xX8eT3D40B0I,3176
+odoo/addons/l10n_ro_stock_account/models/product_product.py,sha256=6qpggTGCMz3jjCDlSR8nDCcQ4pPW3ysLQr_AOju_Wac,16503
+odoo/addons/l10n_ro_stock_account/models/product_template.py,sha256=ou3I7vS4gMpSUeB3irVUgyB11YDGrD5fkw1XM8u4sWw,3103
 odoo/addons/l10n_ro_stock_account/models/res_company.py,sha256=N96-mE6HqZ-nM027UBNbTmxzxxf9rsOsrudv-_lQ7RA,655
-odoo/addons/l10n_ro_stock_account/models/stock_landed_cost.py,sha256=zyC4Fa3F_VsZCzUt9_NxmCd-qfmwGbaCXjcHtpgtSGY,8730
+odoo/addons/l10n_ro_stock_account/models/stock_landed_cost.py,sha256=tMnuufgYOBks7RnX0Y9RUoZ6UqXcQJQWh9D5YFEWwIM,10102
 odoo/addons/l10n_ro_stock_account/models/stock_location.py,sha256=ufg27uLVP3UxfKmTyHx5vixp5UQSjwGDevxOhyhY5Z8,1428
-odoo/addons/l10n_ro_stock_account/models/stock_move.py,sha256=as0DfnSaR841Q8lqWZk-o3fI6k6utkEntGhb0F7w0Z0,24396
-odoo/addons/l10n_ro_stock_account/models/stock_picking.py,sha256=Q7XcmNdwCha8Lj3RLch3I9-VjlRqMAzlTcTZ02y_BxE,866
-odoo/addons/l10n_ro_stock_account/models/stock_valuation_layer.py,sha256=NVwByhzvcXxNCn8KIiMmOGSO9vxc_X92uzf5Ci4-Wg0,4314
+odoo/addons/l10n_ro_stock_account/models/stock_move.py,sha256=QnubYUQ9iwl6uBBBJb7ONI_96zLPQsTHQSyzkTYy0I8,31057
+odoo/addons/l10n_ro_stock_account/models/stock_move_line.py,sha256=ZtBZOrOS5V9qlGJksTTAdPalZ70naOINyU5NOrDj0WQ,1668
+odoo/addons/l10n_ro_stock_account/models/stock_picking.py,sha256=OGNWrnoHDCklDXt5vDzvRCNq-WuKvDQvZIR-oOQSsvI,1334
+odoo/addons/l10n_ro_stock_account/models/stock_quant.py,sha256=h3ptdjkJspbtSXWtGt0Gx60AXNSUdXjw5khNsI5K7Mo,1108
+odoo/addons/l10n_ro_stock_account/models/stock_valuation_layer.py,sha256=5hSGm7Y_dSOVvlW67G7SjFQbM8s1W7BEDkw72bX_Zxo,8827
 odoo/addons/l10n_ro_stock_account/readme/CONTRIBUTORS.rst,sha256=HYRMiA7qtJA4RIxiyWWIOwbHg8XNaV0ltNZqeCbL1dE,303
 odoo/addons/l10n_ro_stock_account/readme/DESCRIPTION.rst,sha256=IGaYSYZzlaVso6xah4LBOiTvBs5xwi86-abmjCMPV50,95
+odoo/addons/l10n_ro_stock_account/security/ir.model.access.csv,sha256=T0dM-gb3TZsHQjiBa-WgJbrY7Iw597P9eWU6ElDQdNo,197
 odoo/addons/l10n_ro_stock_account/static/description/icon.png,sha256=MND3TYqrnM623pd0tf3WhoHU-3X5Ns6ho-Yz_HcYlTk,566
-odoo/addons/l10n_ro_stock_account/static/description/index.html,sha256=_0Jke45bKGihqp6M7sYCK7noFv1YMgAQkSmHr5IoAR8,12854
-odoo/addons/l10n_ro_stock_account/tests/__init__.py,sha256=B6uoxmFArBZarpl5bF3xfAoPmK7MjVbtXH00bBsDFmw,228
-odoo/addons/l10n_ro_stock_account/tests/common.py,sha256=U0K75au7hwFHJzRib9bvNkyn78iQqdkKkWdbtOZ1wWg,19818
-odoo/addons/l10n_ro_stock_account/tests/test_consum.py,sha256=FzlOrh_Xg7iHG0OLr3hlFYwftZB9NReSk2MDEfJldgo,8579
-odoo/addons/l10n_ro_stock_account/tests/test_inventory.py,sha256=FR5Un-HXmP4Qh99VcjUYV_t96meV53cO3IHzjQYI_Rs,2067
-odoo/addons/l10n_ro_stock_account/tests/test_product.py,sha256=b9K57Txq1EQVAZ-1k6gx7RH7sVxJTrFJgK7op78AJto,754
-odoo/addons/l10n_ro_stock_account/tests/test_purchase.py,sha256=5UBY0-_6ors530tMouyZTgm-wnyOMFhwn240wZ422M4,2655
-odoo/addons/l10n_ro_stock_account/tests/test_reception_return_not_fifo.py,sha256=Uvc-VicmQ_ikQAU_Y6FENBxbXbDFDtFJa5JEHtDuLuc,1558
+odoo/addons/l10n_ro_stock_account/static/description/index.html,sha256=UU8vMOY1T6fEJkNuUCpXXS8vCGbvoQaGBl8_Zm5tgUo,12854
+odoo/addons/l10n_ro_stock_account/tests/__init__.py,sha256=AP7Be8J_o1xUyX66jB7qp3EhSBo76F-OamAdU05Zs3o,367
+odoo/addons/l10n_ro_stock_account/tests/common.py,sha256=oTRysPY7o0A7b9GCbMdMYn2ZVpFQY0lWbRSW3hadb_c,23812
+odoo/addons/l10n_ro_stock_account/tests/common2.py,sha256=CNwDQwXI2zGloVbsl0xgsJy21I9kUYDdJjncA_8wT10,4872
+odoo/addons/l10n_ro_stock_account/tests/test_consum.py,sha256=C_zWKivusB1oph_FRhyutDtqtoqjPLBFYE-WKh_mjmY,9814
+odoo/addons/l10n_ro_stock_account/tests/test_inventory.py,sha256=y0j_n9VYi5O5zICDo_QxPunhO_xzpyXFLQ87dS_AZ8g,2074
+odoo/addons/l10n_ro_stock_account/tests/test_po_landed_cost_sale.py,sha256=MHaCk2wTmOIyhMrxXc1XmdheQmYAqXCNIaRwEk82CCY,3741
+odoo/addons/l10n_ro_stock_account/tests/test_po_sale_landed_cost.py,sha256=5kOzlEXZFfjoso_Xjr_D7EqyvwWYWNnGkbB5hjcVyRo,3729
+odoo/addons/l10n_ro_stock_account/tests/test_product.py,sha256=zhA9HlCODIuZpHj7psijmzIliLVgytNxw3RsKkQ3E14,760
+odoo/addons/l10n_ro_stock_account/tests/test_purchase.py,sha256=cCdr5pRS8Hiquo5q7qQ-A_X29cVuSRTSqysC4Hg42pE,3745
+odoo/addons/l10n_ro_stock_account/tests/test_reception_return_not_fifo.py,sha256=_x9emMEa14qIYsC3KPIgehLe_Jn8J88mFDfcxhXMl8k,1932
 odoo/addons/l10n_ro_stock_account/tests/test_retur.py,sha256=gvFJaTQc9-eCv6piYrLYn__jzrljGUMA7hXGEPGlMPQ,515
-odoo/addons/l10n_ro_stock_account/tests/test_sale.py,sha256=wIPujtJB-0XcjFn34F4wFDYzn0BatNa7JC3SYoFSDu4,4403
+odoo/addons/l10n_ro_stock_account/tests/test_sale.py,sha256=sq9MJO4ExfM8W4HJMJDVNrwlnex19UcQns7AWuPvN6M,5707
+odoo/addons/l10n_ro_stock_account/tests/test_svl_vacuum_location.py,sha256=ILoV7dvIk6ysz3yThXCe4KZTazW_fCrVc82skMzA2bw,5202
 odoo/addons/l10n_ro_stock_account/views/account_account_view.xml,sha256=9ox9pIDx02DKpBYC1kpvkMPV-2qRIemsT_aUQgUJWpw,675
 odoo/addons/l10n_ro_stock_account/views/product_category_view.xml,sha256=dHxapD6dz-0u3-tHaXPDp6ms1ILLgye-jVeRwwKAy_Q,1403
 odoo/addons/l10n_ro_stock_account/views/product_template_view.xml,sha256=o0MJ_XESfIf3tBqQJdbVzoWbqRG5Jsz8vSqDlVfPuq0,892
 odoo/addons/l10n_ro_stock_account/views/stock_landed_cost_view.xml,sha256=I86yEy25teqD61V4ra4FVeLzRno3Zm-wlSJSw9JjAgQ,922
 odoo/addons/l10n_ro_stock_account/views/stock_location_view.xml,sha256=ZpCEvKk7v8liHv4rH29cNLQTRuUMtphS6bqKSHtHZf8,1998
-odoo/addons/l10n_ro_stock_account/views/stock_picking_view.xml,sha256=FRd3VT9laJrgmFLo78XKv2lQYQf-JjxWF9gaGl1DToU,806
-odoo/addons/l10n_ro_stock_account/views/stock_valuation_layer_views.xml,sha256=nJ0flRmIG80ylN8O4iqTjjO5XQKlQoQe4GTFQG5ie_0,1285
-odoo/addons/l10n_ro_stock_account/wizard/__init__.py,sha256=wf4PhEE-7o2vclLMuS3BkTkCtVAJxzWfCk9otajn_IQ,35
-odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return.py,sha256=yClu6fN4QiDYGtRAtxRtgM7_nrwA7_G9y6J0zXI5dyI,1043
-odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return_views.xml,sha256=mGs69RctJP8VQTAVDVzkh9kUai_tojeSy2EOFDQjXWw,1331
-odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/METADATA,sha256=pvzJPwbRcotnXEn2BvYUWyM4U9pOwVQmKYKZRr5GkNk,4191
-odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_l10n_ro_stock_account-15.0.3.9.0.dist-info/RECORD,,
+odoo/addons/l10n_ro_stock_account/views/stock_picking_view.xml,sha256=hGR6lyA7UMbWbH_rWMmkkT6zOYbP1KJxez13i0Ajppw,1989
+odoo/addons/l10n_ro_stock_account/views/stock_valuation_layer_views.xml,sha256=vqQUarM29ms1gFNUevxN7JmWVn9fpiHQvDOol_YldjE,3778
+odoo/addons/l10n_ro_stock_account/wizard/__init__.py,sha256=eIqrPGDGbKIxnJ5ebAsp5fwAQ6LsOh0Z6Dw1z1qERSw,83
+odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return.py,sha256=NLkH1KxO9jv0HC2YbFH02JmRe2IJy8n-ZWESDdTP9pA,1316
+odoo/addons/l10n_ro_stock_account/wizard/stock_picking_return_views.xml,sha256=I9BSaRGK8-xbZZTPUy1XhLzJyAP-ftq-VU-EGOpvbxc,1362
+odoo/addons/l10n_ro_stock_account/wizard/stock_valuation_layer_revaluation.py,sha256=qjrzT91n9pw7LJtfrDrEZ6ddg5T50hMU5Kz24LuET_o,1102
+odoo/addons/l10n_ro_stock_account/wizard/stock_valuation_layer_revaluation_views.xml,sha256=djZXcgpMsRbYgYSUR45SCznU6ycHyyV4tjdwUQDvYOU,936
+odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/METADATA,sha256=yyrVVMnxHnj7iBKJBs8DZGW0qeRXLti1HIFCm40dWQA,4192
+odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_l10n_ro_stock_account-16.0.1.1.0.dist-info/RECORD,,
```

